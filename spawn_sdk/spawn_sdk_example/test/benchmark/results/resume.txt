Running Non Parallel Simple Invoke on Singleton Actor - 05s

Operating System: Linux
CPU Information: Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz
Number of Available Cores: 8
Available memory: 31.12 GB
Elixir 1.14.0
Erlang 25.1

Benchmark suite executing with the following configuration:
warmup: 2 s
time: 5 s
memory time: 0 ns
reduction time: 0 ns
parallel: 1
inputs: none specified

Name                                                                            ips        average  deviation         median         99th %
Non Parallel Stateful Singleton Actor                  - Get State           3.98 K      251.55 μs    ±81.75%      236.45 μs      392.37 μs
Non Parallel Stateless Pooled Actor                    - Call Action         2.28 K      438.04 μs    ±96.17%      406.06 μs      712.61 μs
Non Parallel Stateful Singleton Actor                  - Update State        1.68 K      595.36 μs    ±33.73%      549.79 μs     1001.94 μs
Non Parallel Stateful Abstract Spawn and Invoke Actor  - Update State       0.124 K     8048.61 μs    ±27.11%     7752.93 μs    13802.78 μs

Comparison: 
Non Parallel Stateful Singleton Actor                  - Get State           3.98 K
Non Parallel Stateless Pooled Actor                    - Call Action         2.28 K - 1.74x slower +186.49 μs
Non Parallel Stateful Singleton Actor                  - Update State        1.68 K - 2.37x slower +343.82 μs
Non Parallel Stateful Abstract Spawn and Invoke Actor  - Update State       0.124 K - 32.00x slower +7797.06 μs

############## With Profile Enable ##############################################
Name                                                                            ips        average  deviation         median         99th %
Non Parallel Stateful Singleton Actor                  - Get State           2.59 K      385.74 μs    ±90.78%      392.66 μs      592.79 μs
Non Parallel Stateless Pooled Actor                    - Call Action         2.15 K      464.97 μs    ±98.83%      428.17 μs      784.55 μs
Non Parallel Stateful Singleton Actor                  - Update State        1.66 K      602.85 μs    ±34.80%      559.97 μs      996.05 μs
Non Parallel Stateful Abstract Spawn and Invoke Actor  - Update State       0.128 K     7813.84 μs    ±26.39%     7580.11 μs    13423.00 μs

Comparison: 
Non Parallel Stateful Singleton Actor                  - Get State           2.59 K
Non Parallel Stateless Pooled Actor                    - Call Action         2.15 K - 1.21x slower +79.23 μs
Non Parallel Stateful Singleton Actor                  - Update State        1.66 K - 1.56x slower +217.10 μs
Non Parallel Stateful Abstract Spawn and Invoke Actor  - Update State       0.128 K - 20.26x slower +7428.09 μs
Suite saved in external term format at test/benchmark/results/non-parallel-invocations-5s.benchee

Profiling Non Parallel Stateful Singleton Actor                  - Get State    with eprof...

Profile results of #PID<0.30221.0>
#                                                             CALLS    % TIME µS/CALL
Total                                                          1630 100.  709    0.43
Eigr.Functions.Protocol.Noop.new/0                                1 0.00    0    0.00
Eigr.Functions.Protocol.Noop.__struct__/0                         1 0.00    0    0.00
:rand.seed_s/1                                                    1 0.00    0    0.00
:rand.seed/1                                                      1 0.00    0    0.00
:erlang.tuple_to_list/1                                           1 0.00    0    0.00
:erlang.system_time/0                                             1 0.00    0    0.00
:erlang.unique_integer/0                                          1 0.00    0    0.00
:erlang.is_process_alive/1                                        1 0.00    0    0.00
:erlang.atom_to_binary/1                                          2 0.00    0    0.00
String.split/2                                                    1 0.00    0    0.00
String.replace/4                                                  1 0.00    0    0.00
String.replace/3                                                  1 0.00    0    0.00
Protobuf.Builder.new_maybe_strict/3                               3 0.00    0    0.00
Protobuf.Builder.new/2                                            3 0.00    0    0.00
anonymous fn/3 in Protobuf.Decoder.handle_value/6                 1 0.00    0    0.00
Protobuf.Decoder.value_for_field/3                                1 0.00    0    0.00
Protobuf.Decoder.transform_module/2                               1 0.00    0    0.00
Protobuf.Decoder.handle_value/6                                   1 0.00    0    0.00
Protobuf.Decoder.handle_field/5                                   1 0.00    0    0.00
Protobuf.Decoder.decode_varint/4                                  1 0.00    0    0.00
Protobuf.Decoder.build_message/3                                  2 0.00    0    0.00
:telemetry_handler_table.list_for_event/1                         1 0.00    0    0.00
Map.update!/3                                                     1 0.00    0    0.00
Map.new/1                                                         2 0.00    0    0.00
anonymous fn/1 in Spawn.Utils.AnySerializer.unpack_unknown/1      1 0.00    0    0.00
Kernel.validate_struct!/3                                         3 0.00    0    0.00
Kernel.struct/1                                                   2 0.00    0    0.00
Kernel.inspect/1                                                  1 0.00    0    0.00
:otel_id_generator.generate_span_id/0                             2 0.00    0    0.00
String.Chars.impl_for/1                                           2 0.00    0    0.00
Eigr.Functions.Protocol.Actors.ActorSystem.transform_module/0     1 0.00    0    0.00
Eigr.Functions.Protocol.Actors.ActorSystem.new/1                  1 0.00    0    0.00
anonymous fn/1 in :otel_span.is_valid_attribute/2                 2 0.00    0    0.00
:otel_span.tracestate/1                                           2 0.00    0    0.00
Protobuf.Wire.decode/2                                            1 0.00    0    0.00
Inspect.Opts.default_inspect_fun/0                                1 0.00    0    0.00
:opentelemetry.get_tracer/3                                       2 0.00    0    0.00
:opentelemetry.get_tracer/1                                       2 0.00    0    0.00
Enum.reverse/1                                                    1 0.00    0    0.00
Enum.reduce_while/3                                               1 0.00    0    0.00
Enum.reduce/3                                                     3 0.00    0    0.00
Io.Eigr.Spawn.Example.MyState.transform_module/0                  1 0.00    0    0.00
Io.Eigr.Spawn.Example.MyState.new/0                               1 0.00    0    0.00
Io.Eigr.Spawn.Example.MyState.decode/1                            1 0.00    0    0.00
Io.Eigr.Spawn.Example.MyState.__struct__/0                        1 0.00    0    0.00
Io.Eigr.Spawn.Example.MyState.__message_props__/0                 1 0.00    0    0.00
:otel_events.add_events/2                                         2 0.00    0    0.00
:otel_events.add/2                                                2 0.00    0    0.00
:otel_events.new/3                                                2 0.00    0    0.00
:gen.call/4                                                       1 0.00    0    0.00
:otel_ctx.get_current/0                                           1 0.00    0    0.00
:otel_ctx.new/0                                                   1 0.00    0    0.00
:erts_internal.time_unit/0                                        1 0.00    0    0.00
String.Chars.Atom.to_string/1                                     2 0.00    0    0.00
:otel_tracer.set_current_span/2                                   2 0.00    0    0.00
Enumerable.Function.reduce/3                                      1 0.00    0    0.00
Inspect.Algebra.to_doc/2                                          1 0.00    0    0.00
Inspect.Algebra.group/2                                           1 0.00    0    0.00
Inspect.Algebra.group/1                                           1 0.00    0    0.00
Inspect.Algebra.format/2                                          1 0.00    0    0.00
GenServer.whereis/1                                               1 0.00    0    0.00
:otel_batch_processor.is_enabled/0                                2 0.00    0    0.00
:otel_batch_processor.on_end/2                                    2 0.00    0    0.00
:otel_batch_processor.on_start/3                                  2 0.00    0    0.00
SpawnSdk.invoke/2                                                 1 0.00    0    0.00
anonymous fn/3 in Enumerable.List.reduce/3                        1 0.00    0    0.00
Inspect.impl_for/1                                                1 0.00    0    0.00
Inspect.impl_for!/1                                               1 0.00    0    0.00
Eigr.Functions.Protocol.Actors.Actor.transform_module/0           1 0.00    0    0.00
Eigr.Functions.Protocol.Actors.Actor.new/1                        1 0.00    0    0.00
:otel_span_ets.end_span/1                                         2 0.00    0    0.00
Enumerable.impl_for/1                                             2 0.00    0    0.00
Enumerable.impl_for!/1                                            2 0.00    0    0.00
anonymous fn/1 in Actors.invoke_with_span/2                       1 0.00    0    0.00
anonymous fn/5 in Actors.invoke_with_span/2                       1 0.00    0    0.00
Actors.maybe_invoke_async/4                                       1 0.00    0    0.00
Actors.invoke/2                                                   1 0.00    0    0.00
Actors.get_caller/1                                               1 0.00    0    0.00
Spawn.Cluster.Node.Registry.lookup/2                              1 0.00    0    0.00
anonymous fn/0 in :elixir_compiler_1.__FILE__/1                   1 0.00    0    0.00
:lists.foreach_1/2                                                1 0.00    0    0.00
:lists.foreach/2                                                  1 0.00    0    0.00
:lists.filtermap/2                                                2 0.00    0    0.00
:lists.foldl_1/3                                                  4 0.00    0    0.00
:lists.all_1/2                                                    1 0.00    0    0.00
:lists.reverse/2                                                  2 0.00    0    0.00
anonymous fn/3 in :otel_tracer_server.on_end/1                    2 0.00    0    0.00
anonymous fn/2 in :otel_tracer_server.on_end/1                    2 0.00    0    0.00
Horde.Registry.process_alive?/1                                   1 0.00    0    0.00
Horde.Registry.members_ets_table/1                                1 0.00    0    0.00
Horde.Registry.member_in_cluster?/2                               1 0.00    0    0.00
SpawnSdk.System.SpawnSystem.parse_scheduled_to/2                  1 0.00    0    0.00
SpawnSdk.System.SpawnSystem.parse_command_name/1                  1 0.00    0    0.00
Retry.DelayStreams.randomize/1                                    1 0.00    0    0.00
Retry.DelayStreams.exponential_backoff/0                          1 0.00    0    0.00
Retry.DelayStreams.expiry/3                                       1 0.00    0    0.00
Retry.DelayStreams.expiry/2                                       1 0.00    0    0.00
Eigr.Functions.Protocol.InvocationRequest.new/1                   1 0.00    0    0.00
Eigr.Functions.Protocol.InvocationRequest.__struct__/0            1 0.00    0    0.00
Eigr.Functions.Protocol.InvocationRequest.__message_props__/0     1 0.00    0    0.00
:otel_sampler_parent_based.parent_based_sampler/1                 2 0.00    0    0.00
anonymous fn/1 in Stream.concat/2                                 1 0.00    0    0.00
anonymous fn/3 in Stream.do_transform/7                           1 0.00    0    0.00
anonymous fn/3 in Stream.do_transform_result/6                    1 0.00    0    0.00
anonymous fn/3 in Stream.flat_map/2                               1 0.00    0    0.00
anonymous fn/1 in Stream.transform/3                              1 0.00    0    0.00
anonymous fn/1 in Stream.transform/3                              1 0.00    0    0.00
anonymous fn/5 in Stream.transform/3                              1 0.00    0    0.00
Stream.unfold/2                                                   1 0.00    0    0.00
Stream.transform/3                                                1 0.00    0    0.00
Stream.resource/3                                                 1 0.00    0    0.00
Stream.flat_map/2                                                 1 0.00    0    0.00
Stream.do_transform_step/2                                        1 0.00    0    0.00
Stream.do_transform_result/6                                      1 0.00    0    0.00
Stream.do_transform/7                                             1 0.00    0    0.00
Stream.concat/2                                                   1 0.00    0    0.00
Keyword.get_and_update/4                                          1 0.00    0    0.00
Keyword.get_and_update/3                                          1 0.00    0    0.00
Keyword.get/2                                                     1 0.00    0    0.00
:otel_span_limits.link_count_limit/0                              2 0.00    0    0.00
:otel_span_limits.event_count_limit/0                             2 0.00    0    0.00
:otel_span_limits.attribute_value_length_limit/0                  2 0.00    0    0.00
:otel_attributes.maybe_truncate_binary/2                          4 0.00    0    0.00
:otel_attributes.map/1                                            2 0.00    0    0.00
:otel_links.create_links/6                                        2 0.00    0    0.00
:otel_links.create_links/4                                        2 0.00    0    0.00
:rand.seed58/1                                                    3 0.14    1    0.33
:rand.exsss_next/1                                                4 0.14    1    0.25
:rand.exsss_seed/1                                                1 0.14    1    1.00
:rand.seed_get/0                                                  3 0.14    1    0.33
:rand.uniform_s/2                                                 3 0.14    1    0.33
:rand.seed_s/2                                                    1 0.14    1    1.00
:rand.default_seed/0                                              1 0.14    1    1.00
:erlang.min/2                                                     6 0.14    1    0.17
:erlang.phash2/1                                                  1 0.14    1    1.00
:erlang.binary_to_existing_atom/2                                 1 0.14    1    1.00
:erlang.atom_to_binary/2                                          2 0.14    1    0.50
OpenTelemetry.Ctx.new/0                                           1 0.14    1    1.00
String.upcase/2                                                   5 0.14    1    0.20
String.upcase/1                                                   5 0.14    1    0.20
String.split/3                                                    1 0.14    1    1.00
String.do_replace/4                                               2 0.14    1    0.50
Protobuf.Builder.new_from_enum/3                                  1 0.14    1    1.00
Protobuf.Builder.new/1                                            2 0.14    1    0.50
Protobuf.Decoder.update_in_message/3                              1 0.14    1    1.00
:maps.merge/2                                                     3 0.14    1    0.33
Sidecar.Measurements.dispatch_invoke_duration/4                   1 0.14    1    1.00
:io_lib_format.cond_lowercase/2                                   6 0.14    1    0.17
:io_lib_format.chars/2                                            6 0.14    1    0.17
:io_lib_format.adjust/3                                           6 0.14    1    0.17
:io_lib_format.base/1                                             6 0.14    1    0.17
:io_lib_format.count_small/1                                      6 0.14    1    0.17
:io_lib_format.collect_cc/2                                       6 0.14    1    0.17
:io_lib_format.pad_char/2                                         6 0.14    1    0.17
:io_lib_format.precision/2                                        6 0.14    1    0.17
:io_lib_format.field_width/3                                      6 0.14    1    0.17
:io_lib_format.modifiers/2                                        6 0.14    1    0.17
:io_lib_format.scan/2                                             6 0.14    1    0.17
:io_lib_format.build/1                                            6 0.14    1    0.17
:otel_sampler.should_sample/7                                     2 0.14    1    0.50
Spawn.Utils.AnySerializer.any_unpack!/2                           1 0.14    1    1.00
Kernel.struct/2                                                   4 0.14    1    0.25
Access.get/3                                                      5 0.14    1    0.20
Access.get/2                                                      5 0.14    1    0.20
:otel_id_generator.generate_trace_id/0                            1 0.14    1    1.00
String.Chars.to_string/1                                          2 0.14    1    0.50
String.Chars.impl_for!/1                                          2 0.14    1    0.50
:otel_span_utils.sample/7                                         2 0.14    1    0.50
:otel_span_utils.end_span/2                                       2 0.14    1    0.50
:otel_span_utils.root_span_ctx/1                                  1 0.14    1    1.00
:otel_sampler_always_on.should_sample/7                           2 0.14    1    0.50
:otel_span.is_valid_name/1                                        6 0.14    1    0.17
OpenTelemetry.Tracer.set_attributes/1                             3 0.14    1    0.33
OpenTelemetry.Tracer.add_event/2                                  2 0.14    1    0.50
anonymous fn/2 in :opentelemetry.events/1                         2 0.14    1    0.50
:opentelemetry.events/1                                           2 0.14    1    0.50
:opentelemetry.event/3                                            2 0.14    1    0.50
:opentelemetry.get_application_tracer/1                           2 0.14    1    0.50
Enum.map/2                                                        2 0.14    1    0.50
Enum.join_non_empty_list/3                                        7 0.14    1    0.14
Enum.join_list/2                                                  2 0.14    1    0.50
Enum.join/2                                                       2 0.14    1    0.50
:telemetry.execute/3                                              1 0.14    1    1.00
:otel_events.new_event/3                                          2 0.14    1    0.50
Inspect.PID.inspect/2                                             1 0.14    1    1.00
:logger.get_process_metadata/0                                    4 0.14    1    0.25
:logger.set_process_metadata/1                                    4 0.14    1    0.25
:otel_ctx.update_logger_process_metadata/1                        4 0.14    1    0.25
:otel_ctx.detach/1                                                2 0.14    1    0.50
:otel_ctx.attach/1                                                2 0.14    1    0.50
:otel_ctx.get_value/1                                             5 0.14    1    0.20
:otel_ctx.set_value/3                                             2 0.14    1    0.50
:otel_tracer.update_logger_process_metadata/1                     4 0.14    1    0.25
:otel_tracer.current_span_ctx/0                                   5 0.14    1    0.20
:otel_tracer.with_span/4                                          1 0.14    1    1.00
Inspect.Algebra.format/3                                          3 0.14    1    0.33
GenServer.call/3                                                  1 0.14    1    1.00
:otel_batch_processor.do_insert/1                                 2 0.14    1    0.50
Actors.Actor.Entity.invoke/3                                      1 0.14    1    1.00
Inspect.inspect/2                                                 1 0.14    1    1.00
:otel_span_ets.storage_insert/1                                   2 0.14    1    0.50
:otel_span_ets.add_events/2                                       2 0.14    1    0.50
anonymous fn/6 in Actors.invoke_with_span/2                       1 0.14    1    1.00
anonymous fn/3 in Actors.invoke_with_span/2                       1 0.14    1    1.00
Actors.do_lookup_action/4                                         1 0.14    1    1.00
:otel_tracer_default.start_span/4                                 2 0.14    1    0.50
:lists.all/2                                                      1 0.14    1    1.00
:lists.flatten/1                                                  6 0.14    1    0.17
SpawnSdkExample.invok_get_state/0                                 1 0.14    1    1.00
anonymous fn/3 in :otel_tracer_server.on_start/1                  2 0.14    1    0.50
anonymous fn/3 in :otel_tracer_server.on_start/1                  2 0.14    1    0.50
SpawnSdk.System.SpawnSystem.parse_payload/1                       1 0.14    1    1.00
Retry.DelayStreams.randomize/2                                    1 0.14    1    1.00
Stream.map/2                                                      1 0.14    1    1.00
Stream.do_transform_user/6                                        1 0.14    1    1.00
Stream.do_transform_inner_list/7                                  1 0.14    1    1.00
Stream.do_transform/5                                             1 0.14    1    1.00
:otel_span_limits.attribute_per_link_limit/0                      2 0.14    1    0.50
:otel_span_limits.attribute_per_event_limit/0                     2 0.14    1    0.50
:otel_span_limits.attribute_count_limit/0                         2 0.14    1    0.50
:timer.sleep/1                                                    1 0.14    1    1.00
:otel_attributes.new/3                                            4 0.14    1    0.25
:otel_links.new/4                                                 2 0.14    1    0.50
:rand.exsss_uniform/2                                             3 0.28    2    0.67
:rand.seed_put/1                                                  4 0.28    2    0.50
:rand.uniform/1                                                   3 0.28    2    0.67
:erlang.apply/2                                                   1 0.28    2    2.00
:erlang.iolist_size/1                                             6 0.28    2    0.33
:erlang.demonitor/2                                               1 0.28    2    2.00
:erlang.binary_to_atom/2                                          2 0.28    2    1.00
String.replace_guarded/4                                          1 0.28    2    2.00
Protobuf.Decoder.decode/2                                         1 0.28    2    2.00
:maps.put/3                                                       8 0.28    2    0.25
:io_lib_format.get_option/3                                       6 0.28    2    0.33
:io_lib_format.control_small/7                                    6 0.28    2    0.33
:io_lib_format.field_value/2                                     12 0.28    2    0.17
:io_lib_format.field_width/2                                      6 0.28    2    0.33
:io_lib_format.fwrite/2                                           6 0.28    2    0.33
:binary.split/3                                                   1 0.28    2    2.00
Kernel.inspect/2                                                  1 0.28    2    2.00
:otel_span_utils.new_span_ctx/2                                   2 0.28    2    1.00
:otel_span.add_event/3                                            2 0.28    2    1.00
:otel_span.set_attributes/2                                       3 0.28    2    0.67
:otel_span.hex_span_ctx/1                                         4 0.28    2    0.50
Inspect.Opts.new/1                                                1 0.28    2    2.00
:opentelemetry.get_application/1                                  2 0.28    2    1.00
:otel_events.add_events_/3                                        4 0.28    2    0.50
:logger.update_process_metadata/1                                 4 0.28    2    0.50
:otel_tracer.update_logger_process_metadata_from_span_ctx/1       4 0.28    2    0.50
:otel_tracer.current_span_ctx/1                                  10 0.28    2    0.20
:otel_tracer.with_span/5                                          1 0.28    2    2.00
Enumerable.List.reduce/3                                          5 0.28    2    0.40
:otel_span_ets.add_event/3                                        2 0.28    2    1.00
:otel_span_ets.end_span/3                                         2 0.28    2    1.00
Enumerable.reduce/3                                               2 0.28    2    1.00
anonymous fn/8 in Actors.do_lookup_action/4                       1 0.28    2    2.00
Actors.invoke_with_span/2                                         1 0.28    2    2.00
:lists.filtermap_1/2                                              4 0.28    2    0.50
:lists.foldl/3                                                    4 0.28    2    0.50
:lists.reverse/1                                                 10 0.28    2    0.20
Horde.Registry.lookup/2                                           1 0.28    2    2.00
Horde.Registry.keys_ets_table/1                                   1 0.28    2    2.00
:otel_span_limits.get_limit/2                                    12 0.28    2    0.17
:timer.tc/1                                                       1 0.28    2    2.00
:otel_attributes.update_attributes/2                              9 0.28    2    0.22
:otel_attributes.set/2                                            7 0.28    2    0.29
:erlang.++/2                                                      7 0.42    3    0.43
:erlang.convert_time_unit/3                                       1 0.42    3    3.00
:erlang.monitor/3                                                 1 0.42    3    3.00
:maps.iterator/1                                                 19 0.42    3    0.16
Kernel.struct/3                                                   5 0.42    3    0.60
:ets.take/2                                                       2 0.42    3    1.50
:otel_span_utils.new_span/9                                       2 0.42    3    1.50
:otel_span.is_valid_attribute/2                                   9 0.42    3    0.33
:opentelemetry.timestamp/0                                        8 0.42    3    0.38
Enum."-map/2-lists^map/1-0-"/2                                    6 0.42    3    0.50
:otel_ctx.get_value/3                                            15 0.42    3    0.20
:otel_span_ets.set_attributes/2                                   3 0.42    3    1.00
:otel_span_ets.start_span/7                                       2 0.42    3    1.50
anonymous fn/8 in Actors.invoke_with_span/2                       1 0.42    3    3.00
:io_lib.chars_length/1                                            6 0.42    3    0.50
:io_lib.format/2                                                  6 0.42    3    0.50
Retry.DelayStreams.exponential_backoff/2                          1 0.42    3    3.00
:otel_sampler_parent_based.should_sample/7                        2 0.42    3    1.50
:erlang.send/3                                                    1 0.56    4    4.00
:erlang.monotonic_time/0                                         10 0.56    4    0.40
:erlang.pid_to_list/1                                             1 0.56    4    4.00
:erlang.iolist_to_binary/1                                       10 0.56    4    0.40
:io_lib_format.unprefixed_integer/6                               6 0.56    4    0.67
Spawn.Utils.AnySerializer.unpack_unknown/1                        2 0.56    4    2.00
:otel_span.process_attributes/1                                  14 0.56    4    0.29
:otel_span.validate_start_opts/1                                  2 0.56    4    2.00
:erts_internal.map_next/3                                        19 0.56    4    0.21
String.Unicode.upcase/3                                          10 0.56    4    0.40
anonymous fn/8 in Actors.invoke_with_span/2                       1 0.56    4    4.00
:otel_span_limits.get/0                                          12 0.56    4    0.33
:persistent_term.get/1                                           14 0.71    5    0.36
:rand.uniform_range/7                                             7 0.71    5    0.71
:io_lib_format.term/5                                             6 0.71    5    0.83
:io_lib_format.collect/2                                         12 0.71    5    0.42
:io_lib_format.build/2                                            6 0.71    5    0.83
Spawn.Utils.AnySerializer.upcase_first/1                          5 0.71    5    1.00
:ets.lookup_element/3                                             5 0.71    5    1.00
:ets.lookup/2                                                     3 0.71    5    1.67
:otel_span.process_attribute/3                                    9 0.71    5    0.56
Enum."-reduce/3-lists^foldl/2-0-"/3                              17 0.71    5    0.29
:otel_tracer_default.with_span/5                                  2 0.71    5    2.50
Keyword.get/3                                                    13 0.71    5    0.38
:otel_attributes.update_attribute/3                               6 0.71    5    0.83
:rand.mk_alg/1                                                    1 0.85    6    6.00
anonymous fn/4 in Protobuf.Builder.new_from_enum/3                5 0.85    6    1.20
:binary.matches/2                                                 1 0.85    6    6.00
:rand.splitmix64_next/1                                           3 0.99    7    2.33
:erlang.integer_to_list/2                                         6 0.99    7    1.17
:io_lib_format.build_small/1                                     12 0.99    7    0.58
:io_lib_format.field_value/3                                     36 0.99    7    0.19
:gen.do_call/4                                                    1 0.99    7    7.00
SpawnSdk.System.SpawnSystem.invoke/2                              1 0.99    7    7.00
:rand.uniform_range/4                                             3 1.13    8    2.67
:erlang.put/2                                                    12 1.13    8    0.67
:otel_span_utils.start_span/5                                     2 1.13    8    4.00
:maps.get/3                                                      38 1.27    9    0.24
:maps.from_list/1                                                 8 1.27    9    1.13
anonymous fn/2 in Kernel.struct/2                                 9 1.27    9    1.00
:lists.keyfind/3                                                 20 1.27    9    0.45
:persistent_term.get/2                                            7 1.41   10    1.43
:maps.next/1                                                     34 1.41   10    0.29
:maps.fold/3                                                     19 1.55   11    0.58
:maps.fold_1/3                                                   34 1.69   12    0.35
:ets.update_element/3                                             5 1.83   13    2.60
:ets.insert/2                                                     4 2.12   15    3.75
:erlang.setelement/3                                             19 2.26   16    0.84
:io_lib_format.collect_cseq/2                                     6 2.54   18    3.00
:io_lib_format.count_small/2                                    150 5.08   36    0.24
:lists.do_flatten/2                                             150 6.77   48    0.32
:io_lib_format.lowercase/1                                      150 7.05   50    0.33

Profile done over 336 matching functions

Profiling Non Parallel Stateless Pooled Actor                    - Call Action  with eprof...
2023-01-22 18:17:55.960 [nonode@nohost]:[pid=<0.30194.0> ]:[info]:Received Request. Context: %SpawnSdk.Context{state: nil, caller: nil, self: %Eigr.Functions.Protocol.Actors.ActorId{name: "pooled_actor-3", system: "spawn-system", parent: "pooled_actor-3", __unknown_fields__: []}, metadata: %{}, tags: %{}}

Profile results of #PID<0.30223.0>
#                                                                    CALLS    % TIME µS/CALL
Total                                                                 1570 100.  697    0.44
Eigr.Functions.Protocol.Noop.new/0                                       1 0.00    0    0.00
Eigr.Functions.Protocol.Noop.__struct__/0                                1 0.00    0    0.00
:rand.exsss_next/1                                                       4 0.00    0    0.00
:rand.seed_s/2                                                           1 0.00    0    0.00
:rand.seed_s/1                                                           1 0.00    0    0.00
:rand.seed/1                                                             1 0.00    0    0.00
:erlang.tuple_to_list/1                                                  1 0.00    0    0.00
:erlang.convert_time_unit/3                                              1 0.00    0    0.00
:erlang.system_time/0                                                    1 0.00    0    0.00
:erlang.unique_integer/0                                                 1 0.00    0    0.00
:erlang.is_process_alive/1                                               1 0.00    0    0.00
:erlang.atom_to_binary/1                                                 2 0.00    0    0.00
OpenTelemetry.Ctx.new/0                                                  1 0.00    0    0.00
Protobuf.Builder.new_maybe_strict/3                                      3 0.00    0    0.00
Protobuf.Builder.new/2                                                   3 0.00    0    0.00
Protobuf.Builder.new/1                                                   1 0.00    0    0.00
:telemetry_handler_table.list_for_event/1                                1 0.00    0    0.00
Map.new/1                                                                2 0.00    0    0.00
Spawn.Utils.AnySerializer.unpack_unknown/1                               2 0.00    0    0.00
Kernel.validate_struct!/3                                                2 0.00    0    0.00
Kernel.struct/1                                                          1 0.00    0    0.00
Kernel.inspect/1                                                         1 0.00    0    0.00
:otel_id_generator.generate_span_id/0                                    2 0.00    0    0.00
:otel_id_generator.generate_trace_id/0                                   1 0.00    0    0.00
String.Chars.impl_for/1                                                  2 0.00    0    0.00
String.Chars.impl_for!/1                                                 2 0.00    0    0.00
Eigr.Functions.Protocol.Actors.ActorSystem.transform_module/0            1 0.00    0    0.00
Eigr.Functions.Protocol.Actors.ActorSystem.new/1                         1 0.00    0    0.00
anonymous fn/1 in :otel_span.is_valid_attribute/2                        2 0.00    0    0.00
:otel_span.tracestate/1                                                  2 0.00    0    0.00
Inspect.Opts.default_inspect_fun/0                                       1 0.00    0    0.00
:opentelemetry.get_tracer/3                                              2 0.00    0    0.00
:opentelemetry.get_tracer/1                                              2 0.00    0    0.00
Enum.reduce_while/3                                                      1 0.00    0    0.00
Enum.reduce/3                                                            2 0.00    0    0.00
Enum.random_integer/2                                                    1 0.00    0    0.00
Enum.filter/2                                                            1 0.00    0    0.00
Enum.drop_list/2                                                         3 0.00    0    0.00
Process.whereis/1                                                        1 0.00    0    0.00
:otel_events.add_events/2                                                2 0.00    0    0.00
:otel_events.add/2                                                       2 0.00    0    0.00
:otel_events.new/3                                                       2 0.00    0    0.00
:gen.call/4                                                              2 0.00    0    0.00
:otel_ctx.get_current/0                                                  1 0.00    0    0.00
:otel_ctx.new/0                                                          1 0.00    0    0.00
:erts_internal.time_unit/0                                               1 0.00    0    0.00
String.Chars.Atom.to_string/1                                            2 0.00    0    0.00
:otel_tracer.set_current_span/2                                          2 0.00    0    0.00
Inspect.Algebra.to_doc/2                                                 1 0.00    0    0.00
Inspect.Algebra.group/2                                                  1 0.00    0    0.00
Inspect.Algebra.group/1                                                  1 0.00    0    0.00
Inspect.Algebra.format/2                                                 1 0.00    0    0.00
GenServer.whereis/1                                                      2 0.00    0    0.00
:otel_batch_processor.is_enabled/0                                       2 0.00    0    0.00
:otel_batch_processor.on_end/2                                           2 0.00    0    0.00
:otel_batch_processor.on_start/3                                         2 0.00    0    0.00
Actors.Actor.Entity.invoke/3                                             1 0.00    0    0.00
SpawnSdk.invoke/2                                                        1 0.00    0    0.00
anonymous fn/3 in Enumerable.List.reduce/3                               1 0.00    0    0.00
Inspect.impl_for/1                                                       1 0.00    0    0.00
Inspect.impl_for!/1                                                      1 0.00    0    0.00
Eigr.Functions.Protocol.Actors.Actor.transform_module/0                  1 0.00    0    0.00
Eigr.Functions.Protocol.Actors.Actor.new/1                               1 0.00    0    0.00
:otel_span_ets.end_span/1                                                2 0.00    0    0.00
Enumerable.impl_for/1                                                    2 0.00    0    0.00
Enumerable.impl_for!/1                                                   2 0.00    0    0.00
anonymous fn/1 in Actors.invoke_with_span/2                              1 0.00    0    0.00
Actors.maybe_invoke_async/4                                              1 0.00    0    0.00
Actors.invoke/2                                                          1 0.00    0    0.00
Actors.get_caller/1                                                      1 0.00    0    0.00
Spawn.Cluster.Node.Registry.lookup/2                                     1 0.00    0    0.00
anonymous fn/0 in :elixir_compiler_1.__FILE__/1                          1 0.00    0    0.00
:lists.foreach_1/2                                                       1 0.00    0    0.00
:lists.foreach/2                                                         1 0.00    0    0.00
:lists.filtermap/2                                                       2 0.00    0    0.00
:lists.all_1/2                                                           1 0.00    0    0.00
:lists.reverse/1                                                         3 0.00    0    0.00
SpawnSdkExample.spawn_invoke_pooled_actors/0                             1 0.00    0    0.00
anonymous fn/2 in :otel_tracer_server.on_end/1                           2 0.00    0    0.00
Horde.Registry.members_ets_table/1                                       1 0.00    0    0.00
Horde.Registry.member_in_cluster?/2                                      1 0.00    0    0.00
SpawnSdk.System.SpawnSystem.parse_scheduled_to/2                         1 0.00    0    0.00
SpawnSdk.System.SpawnSystem.parse_command_name/1                         1 0.00    0    0.00
Retry.DelayStreams.randomize/1                                           1 0.00    0    0.00
Retry.DelayStreams.exponential_backoff/0                                 1 0.00    0    0.00
Retry.DelayStreams.expiry/3                                              1 0.00    0    0.00
Retry.DelayStreams.expiry/2                                              1 0.00    0    0.00
Eigr.Functions.Protocol.InvocationRequest.new/1                          1 0.00    0    0.00
Eigr.Functions.Protocol.InvocationRequest.__struct__/0                   1 0.00    0    0.00
Eigr.Functions.Protocol.InvocationRequest.__message_props__/0            1 0.00    0    0.00
:otel_sampler_parent_based.parent_based_sampler/1                        2 0.00    0    0.00
anonymous fn/1 in Stream.concat/2                                        1 0.00    0    0.00
anonymous fn/3 in Stream.do_transform/7                                  1 0.00    0    0.00
anonymous fn/3 in Stream.do_transform_result/6                           1 0.00    0    0.00
anonymous fn/3 in Stream.flat_map/2                                      1 0.00    0    0.00
anonymous fn/1 in Stream.transform/3                                     1 0.00    0    0.00
anonymous fn/1 in Stream.transform/3                                     1 0.00    0    0.00
anonymous fn/5 in Stream.transform/3                                     1 0.00    0    0.00
Stream.unfold/2                                                          1 0.00    0    0.00
Stream.transform/3                                                       1 0.00    0    0.00
Stream.resource/3                                                        1 0.00    0    0.00
Stream.flat_map/2                                                        1 0.00    0    0.00
Stream.do_transform_step/2                                               1 0.00    0    0.00
Stream.do_transform_result/6                                             1 0.00    0    0.00
Stream.do_transform/7                                                    1 0.00    0    0.00
Stream.concat/2                                                          1 0.00    0    0.00
Keyword.get_and_update/3                                                 1 0.00    0    0.00
:otel_span_limits.attribute_per_link_limit/0                             2 0.00    0    0.00
:otel_span_limits.attribute_per_event_limit/0                            2 0.00    0    0.00
:otel_span_limits.link_count_limit/0                                     2 0.00    0    0.00
:otel_span_limits.event_count_limit/0                                    2 0.00    0    0.00
:timer.sleep/1                                                           1 0.00    0    0.00
:otel_attributes.map/1                                                   2 0.00    0    0.00
:otel_links.create_links/6                                               2 0.00    0    0.00
:otel_links.create_links/4                                               2 0.00    0    0.00
:otel_links.new/4                                                        2 0.00    0    0.00
anonymous fn/1 in Actors.Registry.ActorRegistry.get_hosts_by_actor/2     1 0.00    0    0.00
:rand.seed58/1                                                           3 0.14    1    0.33
:rand.exsss_seed/1                                                       1 0.14    1    1.00
:rand.seed_get/0                                                         4 0.14    1    0.25
:rand.default_seed/0                                                     1 0.14    1    1.00
:erlang.min/2                                                            6 0.14    1    0.17
:erlang.whereis/1                                                        1 0.14    1    1.00
:erlang.phash2/1                                                         1 0.14    1    1.00
:erlang.iolist_to_binary/1                                               2 0.14    1    0.50
:erlang.atom_to_binary/2                                                 2 0.14    1    0.50
Protobuf.Builder.new_from_enum/3                                         1 0.14    1    1.00
:maps.merge/2                                                            3 0.14    1    0.33
Sidecar.Measurements.dispatch_invoke_duration/4                          1 0.14    1    1.00
:io_lib_format.cond_lowercase/2                                          6 0.14    1    0.17
:io_lib_format.chars/2                                                   6 0.14    1    0.17
:io_lib_format.adjust/3                                                  6 0.14    1    0.17
:io_lib_format.base/1                                                    6 0.14    1    0.17
:io_lib_format.count_small/1                                             6 0.14    1    0.17
:io_lib_format.collect_cc/2                                              6 0.14    1    0.17
:io_lib_format.pad_char/2                                                6 0.14    1    0.17
:io_lib_format.precision/2                                               6 0.14    1    0.17
:io_lib_format.field_width/3                                             6 0.14    1    0.17
:io_lib_format.modifiers/2                                               6 0.14    1    0.17
:io_lib_format.scan/2                                                    6 0.14    1    0.17
:io_lib_format.build/1                                                   6 0.14    1    0.17
:otel_sampler.should_sample/7                                            2 0.14    1    0.50
Kernel.struct/2                                                          3 0.14    1    0.33
Access.get/3                                                             5 0.14    1    0.20
Access.get/2                                                             5 0.14    1    0.20
String.Chars.to_string/1                                                 2 0.14    1    0.50
:otel_span_utils.sample/7                                                2 0.14    1    0.50
:otel_span_utils.end_span/2                                              2 0.14    1    0.50
:otel_sampler_always_on.should_sample/7                                  2 0.14    1    0.50
:otel_span.is_valid_name/1                                               6 0.14    1    0.17
OpenTelemetry.Tracer.add_event/2                                         2 0.14    1    0.50
Inspect.Opts.new/1                                                       1 0.14    1    1.00
anonymous fn/2 in :opentelemetry.events/1                                2 0.14    1    0.50
:opentelemetry.events/1                                                  2 0.14    1    0.50
:opentelemetry.event/3                                                   2 0.14    1    0.50
:opentelemetry.get_application_tracer/1                                  2 0.14    1    0.50
Enum.random/1                                                            1 0.14    1    1.00
Enum.map/2                                                               1 0.14    1    1.00
:telemetry.execute/3                                                     1 0.14    1    1.00
:otel_events.new_event/3                                                 2 0.14    1    0.50
Inspect.PID.inspect/2                                                    1 0.14    1    1.00
:logger.get_process_metadata/0                                           4 0.14    1    0.25
:logger.set_process_metadata/1                                           4 0.14    1    0.25
:otel_ctx.update_logger_process_metadata/1                               4 0.14    1    0.25
:otel_ctx.detach/1                                                       2 0.14    1    0.50
:otel_ctx.attach/1                                                       2 0.14    1    0.50
:otel_ctx.set_value/3                                                    2 0.14    1    0.50
:otel_tracer.update_logger_process_metadata/1                            4 0.14    1    0.25
:otel_tracer.current_span_ctx/0                                          5 0.14    1    0.20
Enumerable.Function.reduce/3                                             1 0.14    1    1.00
Inspect.Algebra.format/3                                                 3 0.14    1    0.33
:otel_batch_processor.do_insert/1                                        2 0.14    1    0.50
Spawn.Cluster.StateHandoff.get/1                                         1 0.14    1    1.00
Inspect.inspect/2                                                        1 0.14    1    1.00
:otel_span_ets.storage_insert/1                                          2 0.14    1    0.50
:otel_span_ets.add_event/3                                               2 0.14    1    0.50
anonymous fn/5 in Actors.invoke_with_span/2                              1 0.14    1    1.00
anonymous fn/3 in Actors.invoke_with_span/2                              1 0.14    1    1.00
Actors.do_lookup_action/4                                                1 0.14    1    1.00
:otel_tracer_default.start_span/4                                        2 0.14    1    0.50
:lists.foldl_1/3                                                         4 0.14    1    0.25
:lists.all/2                                                             1 0.14    1    1.00
:lists.flatten/1                                                         6 0.14    1    0.17
anonymous fn/3 in :otel_tracer_server.on_start/1                         2 0.14    1    0.50
anonymous fn/3 in :otel_tracer_server.on_start/1                         2 0.14    1    0.50
anonymous fn/3 in :otel_tracer_server.on_end/1                           2 0.14    1    0.50
Horde.Registry.process_alive?/1                                          1 0.14    1    1.00
SpawnSdk.System.SpawnSystem.parse_payload/1                              1 0.14    1    1.00
Retry.DelayStreams.randomize/2                                           1 0.14    1    1.00
Stream.map/2                                                             1 0.14    1    1.00
Stream.do_transform_user/6                                               1 0.14    1    1.00
Stream.do_transform_inner_list/7                                         1 0.14    1    1.00
Stream.do_transform/5                                                    1 0.14    1    1.00
:otel_span_limits.attribute_value_length_limit/0                         2 0.14    1    0.50
:otel_span_limits.attribute_count_limit/0                                2 0.14    1    0.50
:otel_attributes.maybe_truncate_binary/2                                 4 0.14    1    0.25
:otel_attributes.new/3                                                   4 0.14    1    0.25
Actors.Registry.ActorRegistry.get_hosts_by_actor/2                       1 0.14    1    1.00
:rand.seed_put/1                                                         5 0.29    2    0.40
:rand.uniform_s/2                                                        4 0.29    2    0.50
:erlang.++/2                                                             7 0.29    2    0.29
:erlang.iolist_size/1                                                    6 0.29    2    0.33
:erlang.binary_to_atom/2                                                 2 0.29    2    1.00
:io_lib_format.get_option/3                                              6 0.29    2    0.33
:io_lib_format.field_value/2                                            12 0.29    2    0.17
:io_lib_format.field_width/2                                             6 0.29    2    0.33
:io_lib_format.fwrite/2                                                  6 0.29    2    0.33
Kernel.inspect/2                                                         1 0.29    2    2.00
:otel_span_utils.root_span_ctx/1                                         1 0.29    2    2.00
:otel_span_utils.new_span_ctx/2                                          2 0.29    2    1.00
:otel_span.add_event/3                                                   2 0.29    2    1.00
:otel_span.set_attributes/2                                              3 0.29    2    0.67
OpenTelemetry.Tracer.set_attributes/1                                    3 0.29    2    0.67
:opentelemetry.get_application/1                                         2 0.29    2    1.00
:otel_events.add_events_/3                                               4 0.29    2    0.50
:logger.update_process_metadata/1                                        4 0.29    2    0.50
:otel_ctx.get_value/1                                                    5 0.29    2    0.40
:otel_tracer.current_span_ctx/1                                         10 0.29    2    0.20
:otel_tracer.with_span/5                                                 1 0.29    2    2.00
:otel_tracer.with_span/4                                                 1 0.29    2    2.00
GenServer.call/3                                                         2 0.29    2    1.00
Enumerable.List.reduce/3                                                 5 0.29    2    0.40
:otel_span_ets.add_events/2                                              2 0.29    2    1.00
:otel_span_ets.end_span/3                                                2 0.29    2    1.00
Enumerable.reduce/3                                                      2 0.29    2    1.00
Actors.invoke_with_span/2                                                1 0.29    2    2.00
:lists.filtermap_1/2                                                     4 0.29    2    0.50
:lists.foldl/3                                                           4 0.29    2    0.50
:io_lib.chars_length/1                                                   6 0.29    2    0.33
Horde.Registry.lookup/2                                                  1 0.29    2    2.00
Horde.Registry.keys_ets_table/1                                          1 0.29    2    2.00
:otel_sampler_parent_based.should_sample/7                               2 0.29    2    1.00
:otel_span_limits.get_limit/2                                           12 0.29    2    0.17
:timer.tc/1                                                              1 0.29    2    2.00
:otel_attributes.update_attributes/2                                     9 0.29    2    0.22
:otel_attributes.set/2                                                   7 0.29    2    0.29
anonymous fn/2 in Actors.Registry.ActorRegistry.get_hosts_by_actor/2    10 0.29    2    0.20
:rand.exsss_uniform/2                                                    4 0.43    3    0.75
:rand.uniform/1                                                          4 0.43    3    0.75
:erlang.apply/2                                                          1 0.43    3    3.00
:erlang.monotonic_time/0                                                10 0.43    3    0.30
:maps.iterator/1                                                        19 0.43    3    0.16
:maps.put/3                                                              8 0.43    3    0.38
:io_lib_format.control_small/7                                           6 0.43    3    0.50
Kernel.struct/3                                                          4 0.43    3    0.75
:otel_span_utils.new_span/9                                              2 0.43    3    1.50
:otel_span.hex_span_ctx/1                                                4 0.43    3    0.75
:otel_span.is_valid_attribute/2                                          9 0.43    3    0.33
:opentelemetry.timestamp/0                                               8 0.43    3    0.38
:otel_ctx.get_value/3                                                   15 0.43    3    0.20
:otel_tracer.update_logger_process_metadata_from_span_ctx/1              4 0.43    3    0.75
:otel_span_ets.set_attributes/2                                          3 0.43    3    1.00
:otel_span_ets.start_span/7                                              2 0.43    3    1.50
anonymous fn/8 in Actors.do_lookup_action/4                              1 0.43    3    3.00
anonymous fn/6 in Actors.invoke_with_span/2                              1 0.43    3    3.00
anonymous fn/8 in Actors.invoke_with_span/2                              1 0.43    3    3.00
:io_lib.format/2                                                         6 0.43    3    0.50
Retry.DelayStreams.exponential_backoff/2                                 1 0.43    3    3.00
Keyword.get/3                                                            9 0.43    3    0.33
:persistent_term.get/1                                                  14 0.57    4    0.29
:rand.uniform_range/7                                                    7 0.57    4    0.57
:erlang.pid_to_list/1                                                    1 0.57    4    4.00
:maps.from_list/1                                                        8 0.57    4    0.50
:io_lib_format.unprefixed_integer/6                                      6 0.57    4    0.67
:io_lib_format.collect/2                                                12 0.57    4    0.33
:io_lib_format.build/2                                                   6 0.57    4    0.67
:ets.take/2                                                              2 0.57    4    2.00
:otel_span.process_attributes/1                                         14 0.57    4    0.29
:otel_span.validate_start_opts/1                                         2 0.57    4    2.00
:erts_internal.map_next/3                                               19 0.57    4    0.21
anonymous fn/8 in Actors.invoke_with_span/2                              1 0.57    4    4.00
:otel_tracer_default.with_span/5                                         2 0.57    4    2.00
:otel_span_limits.get/0                                                 12 0.57    4    0.33
:rand.mk_alg/1                                                           1 0.72    5    5.00
:erlang.monitor/3                                                        2 0.72    5    2.50
:ets.lookup_element/3                                                    5 0.72    5    1.00
:ets.lookup/2                                                            3 0.72    5    1.67
:otel_span.process_attribute/3                                           9 0.72    5    0.56
Enum.filter_list/2                                                      11 0.72    5    0.45
:otel_attributes.update_attribute/3                                      6 0.72    5    0.83
:persistent_term.get/2                                                   7 0.86    6    0.86
:rand.splitmix64_next/1                                                  3 0.86    6    2.00
:erlang.send/3                                                           2 0.86    6    3.00
:io_lib_format.term/5                                                    6 0.86    6    1.00
Enum."-reduce/3-lists^foldl/2-0-"/3                                     16 0.86    6    0.38
:erlang.integer_to_list/2                                                6 1.00    7    1.17
anonymous fn/4 in Protobuf.Builder.new_from_enum/3                       5 1.00    7    1.40
:io_lib_format.build_small/1                                            12 1.00    7    0.58
:io_lib_format.field_value/3                                            36 1.00    7    0.19
:lists.keyfind/3                                                        16 1.00    7    0.44
SpawnSdk.System.SpawnSystem.invoke/2                                     1 1.00    7    7.00
Keyword.get_and_update/4                                                 1 1.00    7    7.00
:rand.uniform_range/4                                                    3 1.15    8    2.67
:erlang.put/2                                                           13 1.15    8    0.62
:maps.get/3                                                             38 1.29    9    0.24
:io_lib_format.collect_cseq/2                                            6 1.29    9    1.50
:otel_span_utils.start_span/5                                            2 1.29    9    4.50
:maps.next/1                                                            34 1.43   10    0.29
:maps.fold/3                                                            19 1.43   10    0.53
anonymous fn/2 in Kernel.struct/2                                        9 1.43   10    1.11
:erlang.setelement/3                                                    19 1.58   11    0.58
:maps.fold_1/3                                                          34 1.58   11    0.32
:gen.do_call/4                                                           2 1.58   11    5.50
:ets.update_element/3                                                    5 1.72   12    2.40
:erlang.demonitor/2                                                      2 2.30   16    8.00
:ets.insert/2                                                            4 2.30   16    4.00
:lists.do_flatten/2                                                    152 6.60   46    0.30
:io_lib_format.count_small/2                                           150 7.32   51    0.34
:io_lib_format.lowercase/1                                             149 7.89   55    0.37

Profile done over 309 matching functions

Profiling Non Parallel Stateful Singleton Actor                  - Update State with eprof...
2023-01-22 18:17:56.357 [nonode@nohost]:[pid=<0.1227.0> ]:[info]:[joe] Received Request: %Io.Eigr.Spawn.Example.MyBusinessMessage{value: 1, __unknown_fields__: []}. Context: %SpawnSdk.Context{state: %Io.Eigr.Spawn.Example.MyState{value: 329382751, __unknown_fields__: []}, caller: nil, self: %Eigr.Functions.Protocol.Actors.ActorId{name: "joe", system: "spawn-system", parent: "", __unknown_fields__: []}, metadata: %{}, tags: %{}}
2023-01-22 18:17:56.357 [nonode@nohost]:[pid=<0.1210.0> ]:[info]:Received pubsub event %Io.Eigr.Spawn.Example.MyBusinessMessage{value: 329382752, __unknown_fields__: []}

Profile results of #PID<0.30225.0>
#                                                              CALLS     % TIME µS/CALL
Total                                                           1763 100.0 1387    0.79
:rand.seed_s/2                                                     1  0.00    0    0.00
:rand.seed_s/1                                                     1  0.00    0    0.00
:rand.seed/1                                                       1  0.00    0    0.00
:erlang.tuple_to_list/1                                            1  0.00    0    0.00
:erlang.convert_time_unit/3                                        1  0.00    0    0.00
:erlang.unique_integer/0                                           1  0.00    0    0.00
:erlang.binary_to_existing_atom/2                                  1  0.00    0    0.00
OpenTelemetry.Ctx.new/0                                            1  0.00    0    0.00
List.pop_at/3                                                      1  0.00    0    0.00
List.pop_at/2                                                      1  0.00    0    0.00
List.last/2                                                        2  0.00    0    0.00
List.last/1                                                        1  0.00    0    0.00
String.split/2                                                     2  0.00    0    0.00
String.replace/4                                                   2  0.00    0    0.00
String.replace/3                                                   2  0.00    0    0.00
String.downcase/1                                                  4  0.00    0    0.00
Protobuf.Builder.new/2                                             4  0.00    0    0.00
Protobuf.Builder.new/1                                             1  0.00    0    0.00
anonymous fn/2 in Protobuf.Encoder.encode_with_message_props/2     1  0.00    0    0.00
Protobuf.Encoder.transform_module/2                                1  0.00    0    0.00
Protobuf.Encoder.skip_field?/3                                     1  0.00    0    0.00
Protobuf.Encoder.skip_enum?/3                                      1  0.00    0    0.00
Protobuf.Encoder.oneof_actual_vals/2                               1  0.00    0    0.00
Protobuf.Encoder.encode_unknown_fields/1                           1  0.00    0    0.00
Protobuf.Encoder.class_field/1                                     1  0.00    0    0.00
Protobuf.Encoder.apply_or_map/3                                    1  0.00    0    0.00
anonymous fn/3 in Protobuf.Decoder.handle_value/6                  1  0.00    0    0.00
Protobuf.Decoder.value_for_field/3                                 1  0.00    0    0.00
Protobuf.Decoder.transform_module/2                                1  0.00    0    0.00
Protobuf.Decoder.handle_field/5                                    1  0.00    0    0.00
Protobuf.Decoder.decode_varint/4                                   1  0.00    0    0.00
Protobuf.Decoder.build_message/3                                   2  0.00    0    0.00
:telemetry_handler_table.list_for_event/1                          1  0.00    0    0.00
Map.update!/3                                                      1  0.00    0    0.00
Map.get/3                                                          1  0.00    0    0.00
anonymous fn/1 in Spawn.Utils.AnySerializer.unpack_unknown/1       1  0.00    0    0.00
Spawn.Utils.AnySerializer.any_unpack!/2                            1  0.00    0    0.00
Kernel.struct/1                                                    1  0.00    0    0.00
Kernel.inspect/1                                                   1  0.00    0    0.00
:otel_id_generator.generate_span_id/0                              2  0.00    0    0.00
:otel_id_generator.generate_trace_id/0                             1  0.00    0    0.00
String.Chars.impl_for/1                                            3  0.00    0    0.00
Eigr.Functions.Protocol.Actors.ActorSystem.transform_module/0      1  0.00    0    0.00
Eigr.Functions.Protocol.Actors.ActorSystem.new/1                   1  0.00    0    0.00
anonymous fn/1 in :otel_span.is_valid_attribute/2                  2  0.00    0    0.00
:otel_span.tracestate/1                                            2  0.00    0    0.00
Protobuf.Wire.encode/2                                             1  0.00    0    0.00
Protobuf.Wire.decode/2                                             1  0.00    0    0.00
Inspect.Opts.default_inspect_fun/0                                 1  0.00    0    0.00
:opentelemetry.get_tracer/3                                        2  0.00    0    0.00
:opentelemetry.get_tracer/1                                        2  0.00    0    0.00
Enum.reverse/1                                                     1  0.00    0    0.00
Enum.reduce_while/3                                                1  0.00    0    0.00
:otel_events.add_events/2                                          2  0.00    0    0.00
:otel_events.add/2                                                 2  0.00    0    0.00
:otel_events.new/3                                                 2  0.00    0    0.00
:gen.call/4                                                        1  0.00    0    0.00
:otel_ctx.get_current/0                                            1  0.00    0    0.00
:otel_ctx.new/0                                                    1  0.00    0    0.00
:erts_internal.time_unit/0                                         1  0.00    0    0.00
:otel_tracer.set_current_span/2                                    2  0.00    0    0.00
Enumerable.Function.reduce/3                                       1  0.00    0    0.00
Inspect.Algebra.group/2                                            1  0.00    0    0.00
Inspect.Algebra.group/1                                            1  0.00    0    0.00
Inspect.Algebra.format/2                                           1  0.00    0    0.00
GenServer.whereis/1                                                1  0.00    0    0.00
:otel_batch_processor.on_end/2                                     2  0.00    0    0.00
:otel_batch_processor.on_start/3                                   2  0.00    0    0.00
Actors.Actor.Entity.invoke/3                                       1  0.00    0    0.00
SpawnSdk.invoke/2                                                  1  0.00    0    0.00
anonymous fn/3 in Enumerable.List.reduce/3                         1  0.00    0    0.00
Inspect.impl_for/1                                                 1  0.00    0    0.00
Inspect.impl_for!/1                                                1  0.00    0    0.00
Eigr.Functions.Protocol.Actors.Actor.transform_module/0            1  0.00    0    0.00
Eigr.Functions.Protocol.Actors.Actor.new/1                         1  0.00    0    0.00
:otel_span_ets.end_span/1                                          2  0.00    0    0.00
Io.Eigr.Spawn.Example.MyBusinessMessage.transform_module/0         2  0.00    0    0.00
Io.Eigr.Spawn.Example.MyBusinessMessage.new/0                      1  0.00    0    0.00
Io.Eigr.Spawn.Example.MyBusinessMessage.encode/1                   1  0.00    0    0.00
Io.Eigr.Spawn.Example.MyBusinessMessage.decode/1                   1  0.00    0    0.00
Io.Eigr.Spawn.Example.MyBusinessMessage.__struct__/0               1  0.00    0    0.00
Io.Eigr.Spawn.Example.MyBusinessMessage.__message_props__/0        2  0.00    0    0.00
Enumerable.impl_for/1                                              2  0.00    0    0.00
Enumerable.impl_for!/1                                             2  0.00    0    0.00
anonymous fn/1 in Actors.invoke_with_span/2                        1  0.00    0    0.00
Actors.maybe_invoke_async/4                                        1  0.00    0    0.00
Actors.invoke/2                                                    1  0.00    0    0.00
Actors.get_caller/1                                                1  0.00    0    0.00
anonymous fn/0 in :elixir_compiler_1.__FILE__/1                    1  0.00    0    0.00
Google.Protobuf.Any.new/1                                          1  0.00    0    0.00
Google.Protobuf.Any.__struct__/0                                   1  0.00    0    0.00
Google.Protobuf.Any.__message_props__/0                            1  0.00    0    0.00
:lists.foreach_1/2                                                 1  0.00    0    0.00
:lists.foreach/2                                                   1  0.00    0    0.00
:lists.filtermap/2                                                 2  0.00    0    0.00
:lists.all_1/2                                                     1  0.00    0    0.00
Protobuf.Wire.Varint.encode/1                                      1  0.00    0    0.00
anonymous fn/3 in :otel_tracer_server.on_end/1                     2  0.00    0    0.00
anonymous fn/2 in :otel_tracer_server.on_end/1                     2  0.00    0    0.00
Horde.Registry.process_alive?/1                                    1  0.00    0    0.00
Horde.Registry.members_ets_table/1                                 1  0.00    0    0.00
Horde.Registry.member_in_cluster?/2                                1  0.00    0    0.00
SpawnSdk.System.SpawnSystem.parse_scheduled_to/2                   1  0.00    0    0.00
SpawnSdk.System.SpawnSystem.parse_command_name/1                   1  0.00    0    0.00
Retry.DelayStreams.randomize/2                                     1  0.00    0    0.00
Retry.DelayStreams.randomize/1                                     1  0.00    0    0.00
Retry.DelayStreams.exponential_backoff/0                           1  0.00    0    0.00
Retry.DelayStreams.expiry/3                                        1  0.00    0    0.00
Retry.DelayStreams.expiry/2                                        1  0.00    0    0.00
Eigr.Functions.Protocol.InvocationRequest.new/1                    1  0.00    0    0.00
Eigr.Functions.Protocol.InvocationRequest.__struct__/0             1  0.00    0    0.00
Eigr.Functions.Protocol.InvocationRequest.__message_props__/0      1  0.00    0    0.00
:otel_sampler_parent_based.parent_based_sampler/1                  2  0.00    0    0.00
anonymous fn/1 in Stream.concat/2                                  1  0.00    0    0.00
anonymous fn/3 in Stream.do_transform/7                            1  0.00    0    0.00
anonymous fn/3 in Stream.do_transform_result/6                     1  0.00    0    0.00
anonymous fn/3 in Stream.flat_map/2                                1  0.00    0    0.00
anonymous fn/1 in Stream.transform/3                               1  0.00    0    0.00
anonymous fn/5 in Stream.transform/3                               1  0.00    0    0.00
Stream.unfold/2                                                    1  0.00    0    0.00
Stream.transform/3                                                 1  0.00    0    0.00
Stream.resource/3                                                  1  0.00    0    0.00
Stream.flat_map/2                                                  1  0.00    0    0.00
Stream.do_transform_step/2                                         1  0.00    0    0.00
Stream.do_transform_result/6                                       1  0.00    0    0.00
Stream.do_transform/7                                              1  0.00    0    0.00
Stream.concat/2                                                    1  0.00    0    0.00
Keyword.get_and_update/3                                           1  0.00    0    0.00
Keyword.get/2                                                      2  0.00    0    0.00
:otel_span_limits.attribute_per_link_limit/0                       2  0.00    0    0.00
:otel_span_limits.attribute_per_event_limit/0                      2  0.00    0    0.00
:otel_span_limits.link_count_limit/0                               2  0.00    0    0.00
:otel_span_limits.attribute_value_length_limit/0                   2  0.00    0    0.00
:otel_attributes.maybe_truncate_binary/2                           4  0.00    0    0.00
:otel_attributes.map/1                                             2  0.00    0    0.00
:otel_links.create_links/6                                         2  0.00    0    0.00
:otel_links.create_links/4                                         2  0.00    0    0.00
:rand.seed58/1                                                     3  0.07    1    0.33
:rand.exsss_next/1                                                 4  0.07    1    0.25
:rand.exsss_seed/1                                                 1  0.07    1    1.00
:rand.mk_alg/1                                                     1  0.07    1    1.00
:rand.seed_get/0                                                   3  0.07    1    0.33
:rand.uniform_s/2                                                  3  0.07    1    0.33
:rand.default_seed/0                                               1  0.07    1    1.00
:erlang.min/2                                                      6  0.07    1    0.17
:erlang.system_time/0                                              1  0.07    1    1.00
:erlang.phash2/1                                                   1  0.07    1    1.00
:erlang.is_process_alive/1                                         1  0.07    1    1.00
:erlang.atom_to_binary/1                                           3  0.07    1    0.33
List.do_pop_at/4                                                   5  0.07    1    0.20
String.upcase/2                                                    5  0.07    1    0.20
String.upcase/1                                                    5  0.07    1    0.20
String.downcase/2                                                  4  0.07    1    0.25
Protobuf.Builder.new_maybe_strict/3                                4  0.07    1    0.25
anonymous fn/3 in Protobuf.Encoder.encode_field/4                  1  0.07    1    1.00
Protobuf.Encoder.encode_with_message_props/2                       1  0.07    1    1.00
Protobuf.Encoder.encode_field/4                                    1  0.07    1    1.00
Protobuf.Decoder.update_in_message/3                               1  0.07    1    1.00
Map.new/1                                                          2  0.07    1    0.50
Sidecar.Measurements.dispatch_invoke_duration/4                    1  0.07    1    1.00
:io_lib_format.cond_lowercase/2                                    6  0.07    1    0.17
:io_lib_format.chars/2                                             6  0.07    1    0.17
:io_lib_format.adjust/3                                            6  0.07    1    0.17
:io_lib_format.base/1                                              6  0.07    1    0.17
:io_lib_format.collect_cc/2                                        6  0.07    1    0.17
:io_lib_format.pad_char/2                                          6  0.07    1    0.17
:io_lib_format.precision/2                                         6  0.07    1    0.17
:io_lib_format.field_width/3                                       6  0.07    1    0.17
:io_lib_format.scan/2                                              6  0.07    1    0.17
:io_lib_format.build/1                                             6  0.07    1    0.17
:otel_sampler.should_sample/7                                      2  0.07    1    0.50
Kernel.validate_struct!/3                                          3  0.07    1    0.33
Kernel.struct/2                                                    4  0.07    1    0.25
Access.get/3                                                       5  0.07    1    0.20
Access.get/2                                                       5  0.07    1    0.20
String.Chars.impl_for!/1                                           3  0.07    1    0.33
:otel_span_utils.sample/7                                          2  0.07    1    0.50
:otel_span_utils.end_span/2                                        2  0.07    1    0.50
:otel_sampler_always_on.should_sample/7                            2  0.07    1    0.50
:otel_span.is_valid_name/1                                         6  0.07    1    0.17
OpenTelemetry.Tracer.set_attributes/1                              3  0.07    1    0.33
OpenTelemetry.Tracer.add_event/2                                   2  0.07    1    0.50
Inspect.Opts.new/1                                                 1  0.07    1    1.00
anonymous fn/2 in :opentelemetry.events/1                          2  0.07    1    0.50
:opentelemetry.events/1                                            2  0.07    1    0.50
:opentelemetry.get_application/1                                   2  0.07    1    0.50
:opentelemetry.get_application_tracer/1                            2  0.07    1    0.50
Enum.reduce/3                                                      6  0.07    1    0.17
Enum.join/2                                                        3  0.07    1    0.33
:telemetry.execute/3                                               1  0.07    1    1.00
:otel_events.new_event/3                                           2  0.07    1    0.50
Inspect.PID.inspect/2                                              1  0.07    1    1.00
:logger.get_process_metadata/0                                     4  0.07    1    0.25
:otel_ctx.update_logger_process_metadata/1                         4  0.07    1    0.25
:otel_ctx.detach/1                                                 2  0.07    1    0.50
:otel_ctx.attach/1                                                 2  0.07    1    0.50
:otel_ctx.get_value/1                                              5  0.07    1    0.20
:otel_ctx.set_value/3                                              2  0.07    1    0.50
String.Chars.Atom.to_string/1                                      3  0.07    1    0.33
:otel_tracer.current_span_ctx/0                                    5  0.07    1    0.20
:otel_tracer.with_span/4                                           1  0.07    1    1.00
Inspect.Algebra.to_doc/2                                           1  0.07    1    1.00
Inspect.Algebra.format/3                                           3  0.07    1    0.33
GenServer.call/3                                                   1  0.07    1    1.00
:otel_batch_processor.do_insert/1                                  2  0.07    1    0.50
:otel_batch_processor.is_enabled/0                                 2  0.07    1    0.50
Inspect.inspect/2                                                  1  0.07    1    1.00
:otel_span_ets.storage_insert/1                                    2  0.07    1    0.50
:otel_span_ets.add_event/3                                         2  0.07    1    0.50
:otel_span_ets.end_span/3                                          2  0.07    1    0.50
anonymous fn/5 in Actors.invoke_with_span/2                        1  0.07    1    1.00
anonymous fn/6 in Actors.invoke_with_span/2                        1  0.07    1    1.00
anonymous fn/3 in Actors.invoke_with_span/2                        1  0.07    1    1.00
Actors.do_lookup_action/4                                          1  0.07    1    1.00
Spawn.Cluster.Node.Registry.lookup/2                               1  0.07    1    1.00
:otel_tracer_default.start_span/4                                  2  0.07    1    0.50
:lists.foldl_1/3                                                   4  0.07    1    0.25
:lists.all/2                                                       1  0.07    1    1.00
:lists.flatten/1                                                   6  0.07    1    0.17
SpawnSdkExample.invoke_update_state/0                              1  0.07    1    1.00
anonymous fn/3 in :otel_tracer_server.on_start/1                   2  0.07    1    0.50
anonymous fn/3 in :otel_tracer_server.on_start/1                   2  0.07    1    0.50
Horde.Registry.keys_ets_table/1                                    1  0.07    1    1.00
SpawnSdk.System.SpawnSystem.parse_payload/1                        1  0.07    1    1.00
Retry.DelayStreams.exponential_backoff/2                           1  0.07    1    1.00
Stream.map/2                                                       1  0.07    1    1.00
Stream.do_transform_user/6                                         1  0.07    1    1.00
Stream.do_transform/5                                              1  0.07    1    1.00
Keyword.get_and_update/4                                           1  0.07    1    1.00
:otel_span_limits.event_count_limit/0                              2  0.07    1    0.50
:otel_span_limits.attribute_count_limit/0                          2  0.07    1    0.50
:timer.sleep/1                                                     1  0.07    1    1.00
:otel_attributes.new/3                                             4  0.07    1    0.25
:otel_links.new/4                                                  2  0.07    1    0.50
:rand.exsss_uniform/2                                              3  0.14    2    0.67
:rand.seed_put/1                                                   4  0.14    2    0.50
:rand.uniform/1                                                    3  0.14    2    0.67
:erlang.apply/2                                                    1  0.14    2    2.00
:erlang.iolist_size/1                                              6  0.14    2    0.33
:erlang.demonitor/2                                                1  0.14    2    2.00
:erlang.binary_to_atom/2                                           2  0.14    2    1.00
:erlang.atom_to_binary/2                                           3  0.14    2    0.67
String.split/3                                                     2  0.14    2    1.00
Protobuf.Encoder.encode_fields/5                                   2  0.14    2    1.00
Protobuf.Encoder.encode/1                                          1  0.14    2    2.00
Protobuf.Decoder.decode/2                                          1  0.14    2    2.00
:maps.merge/2                                                      3  0.14    2    0.67
:io_lib_format.get_option/3                                        6  0.14    2    0.33
:io_lib_format.count_small/1                                       6  0.14    2    0.33
:io_lib_format.field_width/2                                       6  0.14    2    0.33
:io_lib_format.fwrite/2                                            6  0.14    2    0.33
Spawn.Utils.AnySerializer.unpack_unknown/1                         2  0.14    2    1.00
Spawn.Utils.AnySerializer.any_pack!/1                              1  0.14    2    2.00
:otel_span_utils.root_span_ctx/1                                   1  0.14    2    2.00
:otel_span_utils.new_span_ctx/2                                    2  0.14    2    1.00
:otel_span.add_event/3                                             2  0.14    2    1.00
:opentelemetry.event/3                                             2  0.14    2    1.00
Enum.map/2                                                         5  0.14    2    0.40
Enum.join_non_empty_list/3                                        11  0.14    2    0.18
Enum.join_list/2                                                   3  0.14    2    0.67
:otel_events.add_events_/3                                         4  0.14    2    0.50
:logger.update_process_metadata/1                                  4  0.14    2    0.50
:logger.set_process_metadata/1                                     4  0.14    2    0.50
:otel_tracer.update_logger_process_metadata_from_span_ctx/1        4  0.14    2    0.50
:otel_tracer.update_logger_process_metadata/1                      4  0.14    2    0.50
:otel_tracer.with_span/5                                           1  0.14    2    2.00
:otel_span_ets.add_events/2                                        2  0.14    2    1.00
Enumerable.reduce/3                                                2  0.14    2    1.00
:lists.filtermap_1/2                                               4  0.14    2    0.50
:lists.foldl/3                                                     4  0.14    2    0.50
:lists.reverse/2                                                   7  0.14    2    0.29
:io_lib.chars_length/1                                             6  0.14    2    0.33
Horde.Registry.lookup/2                                            1  0.14    2    2.00
:otel_sampler_parent_based.should_sample/7                         2  0.14    2    1.00
Stream.do_transform_inner_list/7                                   1  0.14    2    2.00
:timer.tc/1                                                        1  0.14    2    2.00
:otel_attributes.update_attributes/2                               9  0.14    2    0.22
:otel_attributes.set/2                                             7  0.14    2    0.29
:erlang.monitor/3                                                  1  0.22    3    3.00
Protobuf.Builder.new_from_enum/3                                   2  0.22    3    1.50
:maps.put/3                                                        8  0.22    3    0.38
:io_lib_format.control_small/7                                     6  0.22    3    0.50
:io_lib_format.field_value/2                                      12  0.22    3    0.25
:binary.split/3                                                    2  0.22    3    1.50
Kernel.inspect/2                                                   1  0.22    3    3.00
String.Chars.to_string/1                                           3  0.22    3    1.00
:otel_span_utils.new_span/9                                        2  0.22    3    1.50
:otel_span.set_attributes/2                                        3  0.22    3    1.00
:otel_span.hex_span_ctx/1                                          4  0.22    3    0.75
:otel_span.is_valid_attribute/2                                    9  0.22    3    0.33
:opentelemetry.timestamp/0                                         8  0.22    3    0.38
:otel_ctx.get_value/3                                             15  0.22    3    0.20
:otel_tracer.current_span_ctx/1                                   10  0.22    3    0.30
Enumerable.List.reduce/3                                           5  0.22    3    0.60
:otel_span_ets.set_attributes/2                                    3  0.22    3    1.00
:otel_span_ets.start_span/7                                        2  0.22    3    1.50
anonymous fn/8 in Actors.do_lookup_action/4                        1  0.22    3    3.00
anonymous fn/8 in Actors.invoke_with_span/2                        1  0.22    3    3.00
Actors.invoke_with_span/2                                          1  0.22    3    3.00
:io_lib.format/2                                                   6  0.22    3    0.50
:otel_span_limits.get_limit/2                                     12  0.22    3    0.25
:rand.uniform_range/7                                              7  0.29    4    0.57
:erlang.monotonic_time/0                                          10  0.29    4    0.40
:erlang.pid_to_list/1                                              1  0.29    4    4.00
String.do_replace/4                                                4  0.29    4    1.00
:maps.from_list/1                                                  8  0.29    4    0.50
:io_lib_format.unprefixed_integer/6                                6  0.29    4    0.67
Spawn.Utils.AnySerializer.upcase_first/1                           5  0.29    4    0.80
Kernel.struct/3                                                    6  0.29    4    0.67
:ets.take/2                                                        2  0.29    4    2.00
:otel_span.process_attributes/1                                   14  0.29    4    0.29
:otel_span.validate_start_opts/1                                   2  0.29    4    2.00
String.Unicode.upcase/3                                           10  0.29    4    0.40
anonymous fn/8 in Actors.invoke_with_span/2                        1  0.29    4    4.00
:lists.reverse/1                                                  15  0.29    4    0.27
:otel_span_limits.get/0                                           12  0.29    4    0.33
:otel_attributes.update_attribute/3                                6  0.29    4    0.67
:persistent_term.get/1                                            14  0.36    5    0.36
:erlang.setelement/3                                              19  0.36    5    0.26
String.replace_guarded/4                                           2  0.36    5    2.50
:io_lib_format.term/5                                              6  0.36    5    0.83
:io_lib_format.collect/2                                          12  0.36    5    0.42
:io_lib_format.build/2                                             6  0.36    5    0.83
:erts_internal.map_next/3                                         19  0.36    5    0.26
:otel_tracer_default.with_span/5                                   2  0.36    5    2.50
anonymous fn/1 in Stream.transform/3                               1  0.36    5    5.00
:persistent_term.get/2                                             7  0.43    6    0.86
anonymous fn/4 in Protobuf.Builder.new_from_enum/3                 5  0.43    6    1.20
Spawn.Utils.AnySerializer.get_type_url/1                           1  0.43    6    6.00
:ets.lookup_element/3                                              5  0.43    6    1.20
:ets.lookup/2                                                      3  0.43    6    2.00
:otel_span.process_attribute/3                                     9  0.43    6    0.67
:lists.keyfind/3                                                  24  0.43    6    0.25
:rand.splitmix64_next/1                                            3  0.50    7    2.33
:erlang.integer_to_list/2                                          6  0.50    7    1.17
:io_lib_format.field_value/3                                      36  0.50    7    0.19
Enum."-map/2-lists^map/1-0-"/2                                    14  0.50    7    0.50
Enum."-reduce/3-lists^foldl/2-0-"/3                               22  0.50    7    0.32
:gen.do_call/4                                                     1  0.50    7    7.00
:rand.uniform_range/4                                              3  0.58    8    2.67
:erlang.put/2                                                     12  0.58    8    0.67
Protobuf.Decoder.handle_value/6                                    1  0.58    8    8.00
:maps.iterator/1                                                  19  0.58    8    0.42
:io_lib_format.modifiers/2                                         6  0.58    8    1.33
anonymous fn/2 in Kernel.struct/2                                 11  0.58    8    0.73
:otel_span_utils.start_span/5                                      2  0.58    8    4.00
SpawnSdk.System.SpawnSystem.invoke/2                               1  0.58    8    8.00
Keyword.get/3                                                     17  0.58    8    0.47
:io_lib_format.build_small/1                                      12  0.65    9    0.75
:io_lib_format.collect_cseq/2                                      6  0.65    9    1.50
:maps.get/3                                                       38  0.72   10    0.26
:binary.matches/2                                                  2  0.72   10    5.00
:maps.next/1                                                      34  0.79   11    0.32
:maps.fold/3                                                      19  0.79   11    0.58
:erlang.send/3                                                     1  0.87   12   12.00
:maps.fold_1/3                                                    34  0.87   12    0.35
:erlang.++/2                                                       7  0.94   13    1.86
:ets.insert/2                                                      4  0.94   13    3.25
String.Unicode.downcase/3                                         22  0.94   13    0.59
:ets.update_element/3                                              5  1.01   14    2.80
:io_lib_format.count_small/2                                     150  2.52   35    0.23
:lists.do_flatten/2                                              150  3.39   47    0.31
:io_lib_format.lowercase/1                                       150  3.60   50    0.33
:erlang.iolist_to_binary/1                                        17 43.19  599   35.24

Profile done over 364 matching functions

Profiling Non Parallel Stateful Abstract Spawn and Invoke Actor  - Update State with eprof...
2023-01-22 18:17:56.771 [nonode@nohost]:[pid=<0.30230.0> ]:[notice]:Activating Actor robert_lazy with Parent abs_actor in Node :nonode@nohost. Persistence true.
2023-01-22 18:17:56.772 [nonode@nohost]:[pid=<0.30230.0> ]:[debug]:QUERY OK source="events" db=0.3ms idle=1783.4ms
SELECT e0.`actor`, e0.`system`, e0.`revision`, e0.`tags`, e0.`data_type`, e0.`data`, e0.`inserted_at`, e0.`updated_at` FROM `events` AS e0 WHERE (e0.`actor` = ?) ["robert_lazy"]
2023-01-22 18:17:56.773 [nonode@nohost]:[pid=<0.30230.0> ]:[info]:[abstract] Received Request: %Io.Eigr.Spawn.Example.MyBusinessMessage{value: 1, __unknown_fields__: []}. Context: %SpawnSdk.Context{state: %Io.Eigr.Spawn.Example.MyState{value: 25715, __unknown_fields__: []}, caller: nil, self: %Eigr.Functions.Protocol.Actors.ActorId{name: "robert_lazy", system: "spawn-system", parent: "abs_actor", __unknown_fields__: []}, metadata: %{}, tags: %{}}
2023-01-22 18:17:56.786 [nonode@nohost]:[pid=<0.1227.0> ]:[info]:[joe] Received Request: %Io.Eigr.Spawn.Example.MyBusinessMessage{value: 25716, __unknown_fields__: []}. Context: %SpawnSdk.Context{state: %Io.Eigr.Spawn.Example.MyState{value: 329382752, __unknown_fields__: []}, caller: %Eigr.Functions.Protocol.Actors.ActorId{name: "robert_lazy", system: "spawn-system", parent: "", __unknown_fields__: []}, self: %Eigr.Functions.Protocol.Actors.ActorId{name: "joe", system: "spawn-system", parent: "", __unknown_fields__: []}, metadata: %{}, tags: %{}}
2023-01-22 18:17:56.787 [nonode@nohost]:[pid=<0.1210.0> ]:[info]:Received pubsub event %Io.Eigr.Spawn.Example.MyBusinessMessage{value: 329408468, __unknown_fields__: []}

Profile results of #PID<0.30228.0>
#                                                                    CALLS     % TIME µS/CALL
Total                                                                 5281 100.0 5220    0.99
:rand.seed_s/2                                                           1  0.00    0    0.00
:rand.seed_s/1                                                           1  0.00    0    0.00
:rand.seed/1                                                             1  0.00    0    0.00
:erlang.tuple_to_list/1                                                  1  0.00    0    0.00
:erlang.convert_time_unit/3                                              1  0.00    0    0.00
:erlang.system_time/0                                                    1  0.00    0    0.00
:erlang.unique_integer/0                                                 1  0.00    0    0.00
:erlang.phash2/1                                                         1  0.00    0    0.00
:erlang.make_ref/0                                                       1  0.00    0    0.00
:erlang.atom_to_list/1                                                   1  0.00    0    0.00
OpenTelemetry.Ctx.new/0                                                  1  0.00    0    0.00
Actors.Registry.LoadBalance.Strategies.RoundRobin.next_host/2            1  0.00    0    0.00
Actors.Registry.LoadBalance.Strategies.RoundRobin.next_host/1            1  0.00    0    0.00
List.pop_at/3                                                            1  0.00    0    0.00
List.pop_at/2                                                            1  0.00    0    0.00
List.last/2                                                              2  0.00    0    0.00
List.last/1                                                              1  0.00    0    0.00
List.flatten/1                                                           1  0.00    0    0.00
List.delete/2                                                            1  0.00    0    0.00
String.split/2                                                           2  0.00    0    0.00
String.replace/4                                                         2  0.00    0    0.00
String.replace/3                                                         2  0.00    0    0.00
String.downcase/1                                                        4  0.00    0    0.00
Protobuf.Builder.new/1                                                   1  0.00    0    0.00
anonymous fn/2 in Protobuf.Encoder.encode_with_message_props/2           1  0.00    0    0.00
Protobuf.Encoder.transform_module/2                                      1  0.00    0    0.00
Protobuf.Encoder.skip_field?/3                                           1  0.00    0    0.00
Protobuf.Encoder.skip_enum?/3                                            1  0.00    0    0.00
Protobuf.Encoder.oneof_actual_vals/2                                     1  0.00    0    0.00
Protobuf.Encoder.encode_unknown_fields/1                                 1  0.00    0    0.00
Protobuf.Encoder.class_field/1                                           1  0.00    0    0.00
Protobuf.Encoder.apply_or_map/3                                          1  0.00    0    0.00
anonymous fn/3 in Protobuf.Decoder.handle_value/6                        1  0.00    0    0.00
Protobuf.Decoder.transform_module/2                                      1  0.00    0    0.00
Protobuf.Decoder.handle_value/6                                          1  0.00    0    0.00
Protobuf.Decoder.handle_field/5                                          1  0.00    0    0.00
Protobuf.Decoder.decode_varint/4                                         1  0.00    0    0.00
Protobuf.Decoder.build_message/3                                         2  0.00    0    0.00
:telemetry_handler_table.list_for_event/1                                1  0.00    0    0.00
Map.update!/3                                                            1  0.00    0    0.00
Map.new/1                                                                3  0.00    0    0.00
Map.get/3                                                                1  0.00    0    0.00
anonymous fn/1 in Spawn.Utils.AnySerializer.unpack_unknown/1             1  0.00    0    0.00
Kernel.struct/1                                                          1  0.00    0    0.00
Kernel.inspect/1                                                         2  0.00    0    0.00
:otel_id_generator.generate_span_id/0                                    3  0.00    0    0.00
:otel_id_generator.generate_trace_id/0                                   1  0.00    0    0.00
String.Chars.impl_for/1                                                  2  0.00    0    0.00
String.Chars.impl_for!/1                                                 2  0.00    0    0.00
:elixir_config.identifier_tokenizer/0                                    1  0.00    0    0.00
Eigr.Functions.Protocol.Actors.ActorSystem.transform_module/0            1  0.00    0    0.00
Eigr.Functions.Protocol.Actors.ActorSystem.new/1                         1  0.00    0    0.00
anonymous fn/1 in :otel_span.is_valid_attribute/2                        2  0.00    0    0.00
:otel_span.tracestate/1                                                  3  0.00    0    0.00
Protobuf.Wire.encode/2                                                   1  0.00    0    0.00
Inspect.Opts.default_inspect_fun/0                                       2  0.00    0    0.00
:opentelemetry.get_tracer/3                                              3  0.00    0    0.00
:opentelemetry.get_tracer/1                                              3  0.00    0    0.00
Enum.reverse/1                                                           1  0.00    0    0.00
Enum.reduce_while/3                                                      1  0.00    0    0.00
Enum.filter/2                                                            2  0.00    0    0.00
Enum.each/2                                                              1  0.00    0    0.00
Eigr.Functions.Protocol.Actors.ActorId.new/1                             1  0.00    0    0.00
Eigr.Functions.Protocol.Actors.ActorId.__struct__/0                      1  0.00    0    0.00
Eigr.Functions.Protocol.Actors.ActorId.__message_props__/0               1  0.00    0    0.00
Macro.valid_alias?/1                                                     1  0.00    0    0.00
Macro.classify_atom/1                                                    1  0.00    0    0.00
:otel_events.add/2                                                       3  0.00    0    0.00
:otel_events.new/3                                                       3  0.00    0    0.00
:otel_ctx.get_current/0                                                  2  0.00    0    0.00
:otel_ctx.set_value/3                                                    3  0.00    0    0.00
:otel_ctx.new/0                                                          1  0.00    0    0.00
:erts_internal.time_unit/0                                               1  0.00    0    0.00
String.Chars.Atom.to_string/1                                            2  0.00    0    0.00
:otel_tracer.set_current_span/2                                          3  0.00    0    0.00
Enumerable.Function.reduce/3                                             1  0.00    0    0.00
Inspect.Algebra.to_doc/2                                                 2  0.00    0    0.00
Inspect.Algebra.group/2                                                  2  0.00    0    0.00
Inspect.Algebra.group/1                                                  2  0.00    0    0.00
Inspect.Algebra.format/2                                                 2  0.00    0    0.00
Inspect.Algebra.color/3                                                  1  0.00    0    0.00
Inspect.Atom.color_key/1                                                 1  0.00    0    0.00
GenServer.call/2                                                         2  0.00    0    0.00
:otel_batch_processor.on_end/2                                           3  0.00    0    0.00
:otel_batch_processor.on_start/3                                         3  0.00    0    0.00
String.Tokenizer.validate/2                                              1  0.00    0    0.00
String.Tokenizer.tokenize/1                                              1  0.00    0    0.00
Actors.Actor.Entity.invoke/3                                             1  0.00    0    0.00
Code.Identifier.unary_op/1                                               1  0.00    0    0.00
Code.Identifier.binary_op/1                                              1  0.00    0    0.00
Actors.Registry.LoadBalancer.next_host/1                                 1  0.00    0    0.00
SpawnSdk.invoke/2                                                        1  0.00    0    0.00
Eigr.Functions.Protocol.RequestStatus.transform_module/0                 1  0.00    0    0.00
Eigr.Functions.Protocol.RequestStatus.__struct__/0                       1  0.00    0    0.00
Eigr.Functions.Protocol.RequestStatus.__message_props__/0                1  0.00    0    0.00
anonymous fn/3 in Enumerable.List.reduce/3                               1  0.00    0    0.00
Inspect.impl_for/1                                                       2  0.00    0    0.00
Inspect.impl_for!/1                                                      2  0.00    0    0.00
Eigr.Functions.Protocol.Actors.Actor.transform_module/0                  1  0.00    0    0.00
Eigr.Functions.Protocol.Actors.Actor.new/1                               1  0.00    0    0.00
Io.Eigr.Spawn.Example.MyBusinessMessage.transform_module/0               2  0.00    0    0.00
Io.Eigr.Spawn.Example.MyBusinessMessage.new/0                            1  0.00    0    0.00
Io.Eigr.Spawn.Example.MyBusinessMessage.encode/1                         1  0.00    0    0.00
Io.Eigr.Spawn.Example.MyBusinessMessage.decode/1                         1  0.00    0    0.00
Io.Eigr.Spawn.Example.MyBusinessMessage.__struct__/0                     1  0.00    0    0.00
Io.Eigr.Spawn.Example.MyBusinessMessage.__message_props__/0              2  0.00    0    0.00
Enumerable.impl_for/1                                                    2  0.00    0    0.00
Enumerable.impl_for!/1                                                   2  0.00    0    0.00
anonymous fn/1 in Actors.invoke_with_span/2                              1  0.00    0    0.00
anonymous fn/3 in Actors.invoke_with_span/2                              1  0.00    0    0.00
anonymous fn/3 in Actors.spawn_actor/2                                   1  0.00    0    0.00
Actors.maybe_invoke_async/4                                              1  0.00    0    0.00
Actors.invoke/2                                                          1  0.00    0    0.00
Actors.get_caller/1                                                      1  0.00    0    0.00
Spawn.Cluster.Node.Registry.lookup/2                                     1  0.00    0    0.00
anonymous fn/0 in :elixir_compiler_1.__FILE__/1                          1  0.00    0    0.00
Google.Protobuf.Any.new/1                                                1  0.00    0    0.00
Google.Protobuf.Any.__struct__/0                                         1  0.00    0    0.00
Google.Protobuf.Any.__message_props__/0                                  1  0.00    0    0.00
:lists.foreach_1/2                                                       1  0.00    0    0.00
:lists.foreach/2                                                         1  0.00    0    0.00
:lists.filtermap/2                                                       3  0.00    0    0.00
:lists.all_1/2                                                           1  0.00    0    0.00
:lists.all/2                                                             1  0.00    0    0.00
:lists.member/2                                                          1  0.00    0    0.00
Protobuf.Wire.Varint.encode/1                                            1  0.00    0    0.00
anonymous fn/2 in :otel_tracer_server.on_end/1                           3  0.00    0    0.00
Horde.Registry.lookup/2                                                  1  0.00    0    0.00
SpawnSdk.System.SpawnSystem.parse_scheduled_to/2                         1  0.00    0    0.00
SpawnSdk.System.SpawnSystem.parse_payload/1                              1  0.00    0    0.00
SpawnSdk.System.SpawnSystem.parse_command_name/1                         1  0.00    0    0.00
Retry.DelayStreams.randomize/2                                           1  0.00    0    0.00
Retry.DelayStreams.randomize/1                                           1  0.00    0    0.00
Retry.DelayStreams.exponential_backoff/2                                 1  0.00    0    0.00
Retry.DelayStreams.exponential_backoff/0                                 1  0.00    0    0.00
Retry.DelayStreams.expiry/3                                              1  0.00    0    0.00
Retry.DelayStreams.expiry/2                                              1  0.00    0    0.00
Eigr.Functions.Protocol.InvocationRequest.new/1                          1  0.00    0    0.00
Eigr.Functions.Protocol.InvocationRequest.__struct__/0                   1  0.00    0    0.00
Eigr.Functions.Protocol.InvocationRequest.__message_props__/0            1  0.00    0    0.00
SpawnSdkExample.Actors.AbstractActor.__meta__/1                          1  0.00    0    0.00
Eigr.Functions.Protocol.SpawnResponse.new/1                              1  0.00    0    0.00
Eigr.Functions.Protocol.SpawnResponse.__struct__/0                       1  0.00    0    0.00
Eigr.Functions.Protocol.SpawnResponse.__message_props__/0                1  0.00    0    0.00
:otel_sampler_parent_based.parent_based_sampler/1                        3  0.00    0    0.00
anonymous fn/1 in Stream.concat/2                                        1  0.00    0    0.00
anonymous fn/3 in Stream.do_transform/7                                  1  0.00    0    0.00
anonymous fn/3 in Stream.do_transform_result/6                           1  0.00    0    0.00
anonymous fn/3 in Stream.flat_map/2                                      1  0.00    0    0.00
anonymous fn/1 in Stream.transform/3                                     1  0.00    0    0.00
anonymous fn/1 in Stream.transform/3                                     1  0.00    0    0.00
anonymous fn/5 in Stream.transform/3                                     1  0.00    0    0.00
Stream.unfold/2                                                          1  0.00    0    0.00
Stream.transform/3                                                       1  0.00    0    0.00
Stream.resource/3                                                        1  0.00    0    0.00
Stream.map/2                                                             1  0.00    0    0.00
Stream.flat_map/2                                                        1  0.00    0    0.00
Stream.do_transform_user/6                                               1  0.00    0    0.00
Stream.do_transform_step/2                                               1  0.00    0    0.00
Stream.do_transform_result/6                                             1  0.00    0    0.00
Stream.do_transform/7                                                    1  0.00    0    0.00
Stream.concat/2                                                          1  0.00    0    0.00
Keyword.get_and_update/3                                                 1  0.00    0    0.00
Keyword.get/2                                                            3  0.00    0    0.00
Keyword.fetch!/2                                                         1  0.00    0    0.00
:otel_span_limits.event_count_limit/0                                    3  0.00    0    0.00
:otel_span_limits.attribute_value_length_limit/0                         3  0.00    0    0.00
:timer.sleep/1                                                           1  0.00    0    0.00
:otel_attributes.map/1                                                   3  0.00    0    0.00
:otel_links.create_links/6                                               3  0.00    0    0.00
:otel_links.create_links/4                                               3  0.00    0    0.00
anonymous fn/1 in Actors.Registry.ActorRegistry.get_hosts_by_actor/2     1  0.00    0    0.00
anonymous fn/2 in Actors.Registry.ActorRegistry.get_hosts_by_actor/2     1  0.00    0    0.00
Actors.Registry.ActorRegistry.register/1                                 1  0.00    0    0.00
:rand.seed58/1                                                           3  0.02    1    0.33
:rand.exsss_uniform/2                                                    4  0.02    1    0.25
:rand.exsss_next/1                                                       5  0.02    1    0.20
:rand.exsss_seed/1                                                       1  0.02    1    1.00
:rand.mk_alg/1                                                           1  0.02    1    1.00
:rand.seed_get/0                                                         4  0.02    1    0.25
:rand.uniform_s/2                                                        4  0.02    1    0.25
:rand.default_seed/0                                                     1  0.02    1    1.00
:erlang.min/2                                                           10  0.02    1    0.10
:erlang.spawn_request/5                                                  1  0.02    1    1.00
:erlang.spawn_request/4                                                  1  0.02    1    1.00
:erlang.binary_to_existing_atom/2                                        1  0.02    1    1.00
:erlang.binary_to_atom/2                                                 1  0.02    1    1.00
:erlang.atom_to_binary/1                                                 3  0.02    1    0.33
List.do_pop_at/4                                                         5  0.02    1    0.20
String.upcase/2                                                          5  0.02    1    0.20
String.upcase/1                                                          5  0.02    1    0.20
String.downcase/2                                                        4  0.02    1    0.25
Protobuf.Builder.new/2                                                   8  0.02    1    0.13
anonymous fn/3 in Protobuf.Encoder.encode_field/4                        1  0.02    1    1.00
Protobuf.Encoder.encode_fields/5                                         2  0.02    1    0.50
Protobuf.Encoder.encode_field/4                                          1  0.02    1    1.00
Protobuf.Decoder.value_for_field/3                                       1  0.02    1    1.00
Protobuf.Decoder.update_in_message/3                                     1  0.02    1    1.00
Sidecar.Measurements.dispatch_invoke_duration/4                          1  0.02    1    1.00
:io_lib_format.chars/2                                                  10  0.02    1    0.10
:io_lib_format.adjust/3                                                 10  0.02    1    0.10
:io_lib_format.base/1                                                   10  0.02    1    0.10
:io_lib_format.pad_char/2                                               10  0.02    1    0.10
:io_lib_format.field_width/3                                            10  0.02    1    0.10
:io_lib_format.modifiers/2                                              10  0.02    1    0.10
:otel_sampler.should_sample/7                                            3  0.02    1    0.33
Spawn.Utils.AnySerializer.any_unpack!/2                                  1  0.02    1    1.00
Access.get/3                                                             7  0.02    1    0.14
Access.get/2                                                             7  0.02    1    0.14
String.Chars.to_string/1                                                 2  0.02    1    0.50
:otel_span_utils.sample/7                                                3  0.02    1    0.33
:otel_span_utils.end_span/2                                              3  0.02    1    0.33
:otel_span_utils.root_span_ctx/1                                         1  0.02    1    1.00
:otel_sampler_always_on.should_sample/7                                  3  0.02    1    0.33
:otel_span.is_valid_name/1                                               9  0.02    1    0.11
Protobuf.Wire.decode/2                                                   1  0.02    1    1.00
OpenTelemetry.Tracer.add_event/2                                         3  0.02    1    0.33
Inspect.Opts.new/1                                                       2  0.02    1    0.50
anonymous fn/2 in :opentelemetry.events/1                                3  0.02    1    0.33
:opentelemetry.get_application/1                                         3  0.02    1    0.33
:opentelemetry.get_application_tracer/1                                  3  0.02    1    0.33
Enum.join/2                                                              3  0.02    1    0.33
:telemetry.execute/3                                                     1  0.02    1    1.00
Macro.operator?/2                                                        2  0.02    1    0.50
Macro.inspect_atom/2                                                     1  0.02    1    1.00
:otel_events.new_event/3                                                 3  0.02    1    0.33
:otel_events.add_events/2                                                3  0.02    1    0.33
Inspect.PID.inspect/2                                                    1  0.02    1    1.00
:gen.call/4                                                              6  0.02    1    0.17
:otel_ctx.update_logger_process_metadata/1                               6  0.02    1    0.17
:otel_ctx.detach/1                                                       3  0.02    1    0.33
:otel_ctx.attach/1                                                       3  0.02    1    0.33
Inspect.Algebra.format/3                                                 6  0.02    1    0.17
Inspect.Atom.inspect/2                                                   1  0.02    1    1.00
:otel_batch_processor.is_enabled/0                                       3  0.02    1    0.33
Spawn.Cluster.StateHandoff.get/1                                         3  0.02    1    0.33
Eigr.Functions.Protocol.RequestStatus.new/1                              2  0.02    1    0.50
:otel_span_ets.storage_insert/1                                          3  0.02    1    0.33
:otel_span_ets.end_span/1                                                3  0.02    1    0.33
anonymous fn/8 in Actors.do_lookup_action/4                              1  0.02    1    1.00
anonymous fn/5 in Actors.invoke_with_span/2                              1  0.02    1    1.00
anonymous fn/2 in Actors.spawn_actor/2                                   1  0.02    1    1.00
Actors.do_lookup_action/4                                                1  0.02    1    1.00
:lists.foldl_1/3                                                         6  0.02    1    0.17
:lists.reverse/2                                                         8  0.02    1    0.13
SpawnSdkExample.spawn_and_invoke/0                                       1  0.02    1    1.00
anonymous fn/3 in :otel_tracer_server.on_start/1                         3  0.02    1    0.33
anonymous fn/3 in :otel_tracer_server.on_start/1                         3  0.02    1    0.33
anonymous fn/3 in :otel_tracer_server.on_end/1                           3  0.02    1    0.33
Horde.Registry.keys_ets_table/1                                          1  0.02    1    1.00
SpawnSdk.System.SpawnSystem.spawn_actor/2                                1  0.02    1    1.00
SpawnSdk.System.SpawnSystem.get_parent_actor_name/1                      1  0.02    1    1.00
SpawnSdk.System.SpawnSystem.build_spawn_req/3                            1  0.02    1    1.00
Stream.do_transform/5                                                    1  0.02    1    1.00
Keyword.get_and_update/4                                                 1  0.02    1    1.00
:otel_span_limits.attribute_per_link_limit/0                             3  0.02    1    0.33
:otel_span_limits.attribute_per_event_limit/0                            3  0.02    1    0.33
:otel_span_limits.link_count_limit/0                                     3  0.02    1    0.33
:otel_span_limits.attribute_count_limit/0                                3  0.02    1    0.33
:otel_attributes.maybe_truncate_binary/2                                 7  0.02    1    0.14
:otel_attributes.new/3                                                   6  0.02    1    0.17
:otel_links.new/4                                                        3  0.02    1    0.33
anonymous fn/4 in Actors.Registry.ActorRegistry.lookup/3                 1  0.02    1    1.00
Actors.Registry.ActorRegistry.get_hosts_by_actor/2                       1  0.02    1    1.00
:rand.seed_put/1                                                         5  0.04    2    0.40
:erlang.pid_to_list/1                                                    1  0.04    2    2.00
:erlang.atom_to_binary/2                                                 3  0.04    2    0.67
String.split/3                                                           2  0.04    2    1.00
Protobuf.Builder.new_maybe_strict/3                                      8  0.04    2    0.25
Protobuf.Encoder.encode_with_message_props/2                             1  0.04    2    2.00
Protobuf.Encoder.encode/1                                                1  0.04    2    2.00
Protobuf.Decoder.decode/2                                                1  0.04    2    2.00
:maps.merge/2                                                            5  0.04    2    0.40
:io_lib_format.cond_lowercase/2                                         10  0.04    2    0.20
:io_lib_format.count_small/1                                            10  0.04    2    0.20
:io_lib_format.collect_cc/2                                             10  0.04    2    0.20
:io_lib_format.precision/2                                              10  0.04    2    0.20
:io_lib_format.scan/2                                                   10  0.04    2    0.20
:io_lib_format.build/1                                                  10  0.04    2    0.20
Spawn.Utils.AnySerializer.unpack_unknown/1                               2  0.04    2    1.00
Spawn.Utils.AnySerializer.any_pack!/1                                    1  0.04    2    2.00
Kernel.validate_struct!/3                                                6  0.04    2    0.33
Kernel.struct/2                                                          8  0.04    2    0.25
:otel_span_utils.new_span_ctx/2                                          3  0.04    2    0.67
:otel_span.add_event/3                                                   3  0.04    2    0.67
:opentelemetry.events/1                                                  3  0.04    2    0.67
:opentelemetry.event/3                                                   3  0.04    2    0.67
Enum."-each/2-lists^foreach/1-0-"/2                                      2  0.04    2    1.00
Enum.reduce/3                                                           12  0.04    2    0.17
Enum.map/2                                                               7  0.04    2    0.29
Enum.join_non_empty_list/3                                              11  0.04    2    0.18
Enum.join_list/2                                                         3  0.04    2    0.67
Macro.inner_classify/1                                                   1  0.04    2    2.00
:otel_events.add_events_/3                                               6  0.04    2    0.33
:logger.get_process_metadata/0                                           6  0.04    2    0.33
:logger.set_process_metadata/1                                           6  0.04    2    0.33
:otel_ctx.get_value/1                                                    8  0.04    2    0.25
:otel_tracer.update_logger_process_metadata/1                            6  0.04    2    0.33
:otel_tracer.current_span_ctx/1                                         15  0.04    2    0.13
:otel_tracer.current_span_ctx/0                                          8  0.04    2    0.25
:otel_tracer.with_span/5                                                 1  0.04    2    2.00
:otel_tracer.with_span/4                                                 2  0.04    2    1.00
GenServer.whereis/1                                                      6  0.04    2    0.33
:otel_batch_processor.do_insert/1                                        3  0.04    2    0.67
String.Tokenizer.continue/6                                             13  0.04    2    0.15
Spawn.Cluster.StateHandoff.set/2                                         2  0.04    2    1.00
Enumerable.List.reduce/3                                                 5  0.04    2    0.40
Inspect.inspect/2                                                        2  0.04    2    1.00
:otel_span_ets.add_event/3                                               3  0.04    2    0.67
:otel_span_ets.end_span/3                                                3  0.04    2    0.67
Enumerable.reduce/3                                                      2  0.04    2    1.00
anonymous fn/6 in Actors.invoke_with_span/2                              1  0.04    2    2.00
Actors.invoke_with_span/2                                                1  0.04    2    2.00
:otel_tracer_default.start_span/4                                        3  0.04    2    0.67
:lists.filtermap_1/2                                                     6  0.04    2    0.33
:lists.foldl/3                                                           6  0.04    2    0.33
:lists.flatten/1                                                        11  0.04    2    0.18
:otel_sampler_parent_based.should_sample/7                               3  0.04    2    0.67
Stream.do_transform_inner_list/7                                         1  0.04    2    2.00
:timer.tc/1                                                              1  0.04    2    2.00
:otel_attributes.update_attributes/2                                    14  0.04    2    0.14
:otel_attributes.set/2                                                  11  0.04    2    0.18
Actors.Registry.ActorRegistry.lookup/3                                   1  0.04    2    2.00
:rand.uniform/1                                                          4  0.06    3    0.75
:erlang.apply/2                                                          1  0.06    3    3.00
:erlang.iolist_size/1                                                   10  0.06    3    0.30
:maps.put/3                                                             12  0.06    3    0.25
:io_lib_format.get_option/3                                             10  0.06    3    0.30
:io_lib_format.field_value/2                                            20  0.06    3    0.15
:io_lib_format.fwrite/2                                                 10  0.06    3    0.30
Kernel.inspect/2                                                         2  0.06    3    1.50
:ets.lookup/2                                                            2  0.06    3    1.50
:otel_span.hex_span_ctx/1                                                6  0.06    3    0.50
:otel_span.is_valid_attribute/2                                         13  0.06    3    0.23
OpenTelemetry.Tracer.set_attributes/1                                    5  0.06    3    0.60
:logger.update_process_metadata/1                                        6  0.06    3    0.50
:otel_tracer.update_logger_process_metadata_from_span_ctx/1              6  0.06    3    0.50
:otel_span_ets.add_events/2                                              3  0.06    3    1.00
:otel_span_ets.start_span/7                                              3  0.06    3    1.00
anonymous fn/8 in Actors.invoke_with_span/2                              1  0.06    3    3.00
Actors.spawn_actor/2                                                     1  0.06    3    3.00
:io_lib.chars_length/1                                                  10  0.06    3    0.30
:io_lib.format/2                                                        10  0.06    3    0.30
:otel_span_limits.get_limit/2                                           18  0.06    3    0.17
anonymous fn/1 in Actors.Registry.ActorRegistry.register/1               1  0.06    3    3.00
:rand.splitmix64_next/1                                                  3  0.08    4    1.33
:rand.uniform_range/7                                                    9  0.08    4    0.44
:erlang.whereis/1                                                        5  0.08    4    0.80
String.do_replace/4                                                      4  0.08    4    1.00
:maps.iterator/1                                                        29  0.08    4    0.14
:maps.from_list/1                                                       12  0.08    4    0.33
:io_lib_format.control_small/7                                          10  0.08    4    0.40
:io_lib_format.field_width/2                                            10  0.08    4    0.40
:binary.split/3                                                          2  0.08    4    2.00
Spawn.Utils.AnySerializer.upcase_first/1                                 5  0.08    4    0.80
anonymous fn/2 in Kernel.struct/2                                       17  0.08    4    0.24
:otel_span_utils.new_span/9                                              3  0.08    4    1.33
:otel_span.set_attributes/2                                              5  0.08    4    0.80
:otel_span.validate_start_opts/1                                         3  0.08    4    1.33
:opentelemetry.timestamp/0                                              12  0.08    4    0.33
Process.whereis/1                                                        5  0.08    4    0.80
:otel_ctx.get_value/3                                                   23  0.08    4    0.17
String.Unicode.upcase/3                                                 10  0.08    4    0.40
:otel_span_ets.set_attributes/2                                          5  0.08    4    0.80
anonymous fn/8 in Actors.invoke_with_span/2                              1  0.08    4    4.00
:lists.reverse/1                                                        16  0.08    4    0.25
:persistent_term.get/1                                                  21  0.10    5    0.24
:erlang.monotonic_time/0                                                14  0.10    5    0.36
String.replace_guarded/4                                                 2  0.10    5    2.50
Spawn.Utils.AnySerializer.get_type_url/1                                 1  0.10    5    5.00
:otel_span.process_attributes/1                                         22  0.10    5    0.23
:erts_internal.map_next/3                                               29  0.10    5    0.17
String.Unicode.downcase/3                                               22  0.10    5    0.23
:otel_tracer_default.with_span/5                                         3  0.10    5    1.67
:otel_span_limits.get/0                                                 18  0.10    5    0.28
:persistent_term.get/2                                                  12  0.11    6    0.50
:erlang.setelement/3                                                    29  0.11    6    0.21
:io_lib_format.unprefixed_integer/6                                     10  0.11    6    0.60
:io_lib_format.collect/2                                                20  0.11    6    0.30
:io_lib_format.build/2                                                  10  0.11    6    0.60
:ets.take/2                                                              3  0.11    6    2.00
anonymous fn/7 in Actors.do_lookup_action/4                              1  0.11    6    6.00
:otel_attributes.update_attribute/3                                      9  0.11    6    0.67
:rand.uniform_range/4                                                    4  0.13    7    1.75
:erlang.put/2                                                           17  0.13    7    0.41
:io_lib_format.term/5                                                   10  0.13    7    0.70
:otel_span.process_attribute/3                                          13  0.13    7    0.54
:erpc.call/5                                                             1  0.13    7    7.00
GenServer.call/3                                                         6  0.13    7    1.17
SpawnSdk.System.SpawnSystem.invoke/2                                     1  0.13    7    7.00
:erlang.iolist_to_binary/1                                              18  0.15    8    0.44
anonymous fn/4 in Protobuf.Builder.new_from_enum/3                       6  0.15    8    1.33
Kernel.struct/3                                                         13  0.15    8    0.62
:ets.lookup_element/3                                                    8  0.15    8    1.00
:lists.keyfind/3                                                        33  0.15    8    0.24
Keyword.get/3                                                           21  0.15    8    0.38
:erlang.integer_to_list/2                                               10  0.17    9    0.90
Protobuf.Builder.new_from_enum/3                                         5  0.17    9    1.80
:otel_span_utils.start_span/5                                            3  0.17    9    3.00
Enum."-map/2-lists^map/1-0-"/2                                          18  0.17    9    0.50
:io_lib_format.field_value/3                                            60  0.19   10    0.17
Enum."-reduce/3-lists^foldl/2-0-"/3                                     35  0.19   10    0.29
:maps.get/3                                                             58  0.21   11    0.19
:io_lib_format.build_small/1                                            20  0.21   11    0.55
:maps.next/1                                                            51  0.23   12    0.24
:io_lib_format.collect_cseq/2                                           10  0.23   12    1.20
:binary.matches/2                                                        2  0.23   12    6.00
:erlang.monitor/3                                                        6  0.25   13    2.17
:maps.fold/3                                                            29  0.25   13    0.45
:erts_internal.spawn_request/4                                           1  0.25   13   13.00
:maps.fold_1/3                                                          51  0.27   14    0.27
:ets.insert/2                                                            6  0.29   15    2.50
:ets.update_element/3                                                    8  0.34   18    2.25
:erlang.demonitor/2                                                      6  0.40   21    3.50
:io_lib_format.count_small/2                                           250  0.86   45    0.18
:erlang.++/2                                                            13  1.36   71    5.46
:lists.do_flatten/2                                                    254  1.36   71    0.28
:io_lib_format.lowercase/1                                             250  1.40   73    0.29
anonymous fn/2 in Actors.Registry.ActorRegistry.lookup/3              1273  5.50  287    0.23
Enum.filter_list/2                                                    1276 10.31  538    0.42
:gen.do_call/4                                                           6 20.15 1052  175.33
:erlang.send/3                                                           6 44.33 2314  385.67

Profile done over 422 matching functions

Profile results of #PID<0.30229.0>
#                                                       CALLS     % TIME µS/CALL
Total                                                      39 100.0   50    1.28
:erlang.is_atom/1                                           1  0.00    0    0.00
:erlang.phash2/2                                            1  0.00    0    0.00
:erlang.exit/1                                              1  0.00    0    0.00
Enum."-reduce/3-lists^foldl/2-0-"/3                         1  0.00    0    0.00
Enum.reduce/3                                               1  0.00    0    0.00
Enum.all?/2                                                 1  0.00    0    0.00
PartitionSupervisor.whereis_name/2                          1  0.00    0    0.00
:gen.call/4                                                 1  0.00    0    0.00
Actors.Actor.Entity.Supervisor.via/0                        1  0.00    0    0.00
Supervisor.init_child/1                                     1  0.00    0    0.00
DynamicSupervisor.validate_type/1                           1  0.00    0    0.00
DynamicSupervisor.validate_start/1                          1  0.00    0    0.00
DynamicSupervisor.validate_shutdown/1                       1  0.00    0    0.00
DynamicSupervisor.validate_restart/1                        1  0.00    0    0.00
DynamicSupervisor.validate_modules/1                        1  0.00    0    0.00
DynamicSupervisor.validate_and_start_child/2                1  0.00    0    0.00
:erlang.monitor/2                                           1  2.00    1    1.00
:erlang.demonitor/2                                         1  2.00    1    1.00
Map.get/3                                                   4  2.00    1    0.25
Enum.all_list/2                                             2  2.00    1    0.50
PartitionSupervisor.whereis_name/1                          1  2.00    1    1.00
GenServer.whereis/1                                         1  2.00    1    1.00
Actors.try_reactivate_actor/3                               1  2.00    1    1.00
Supervisor.child_spec/2                                     1  2.00    1    1.00
DynamicSupervisor.validate_child/1                          1  2.00    1    1.00
DynamicSupervisor.start_child/2                             1  2.00    1    1.00
:erpc.execute_call/4                                        1  4.00    2    2.00
GenServer.call/3                                            1  4.00    2    2.00
Actors.Actor.Entity.Supervisor.lookup_or_create_actor/3     1  4.00    2    2.00
DynamicSupervisor.validate_child/5                          1  4.00    2    2.00
:ets.lookup_element/3                                       2  6.00    3    1.50
:erts_internal.spawn_init/1                                 1 10.00    5    5.00
PartitionSupervisor.name_partitions/1                       1 16.00    8    8.00
:gen.do_call/4                                              1 32.00   16   16.00

Profile done over 34 matching functions